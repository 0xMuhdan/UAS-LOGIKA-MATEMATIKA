<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- SEO Meta Tags -->
    <title>
      Sistem Pakar Mitigasi Bencana Alam - Prediksi Banjir Berbasis Logika
    </title>
    <meta
      name="description"
      content="Aplikasi web untuk prediksi risiko banjir menggunakan logika proposisional dan tabel kebenaran. Analisis real-time dengan Python backend."
    />
    <meta
      name="keywords"
      content="mitigasi bencana, banjir, logika proposisional, sistem pakar, prediksi banjir"
    />
    <meta name="author" content="Sistem Pakar Bencana" />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒŠ</text></svg>"
    />

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- FontAwesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <style>
      /* Custom animations */
      @keyframes pulse-danger {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.05);
          opacity: 0.9;
        }
      }

      .pulse-danger {
        animation: pulse-danger 2s ease-in-out infinite;
      }

      @keyframes slideIn {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .slide-in {
        animation: slideIn 0.5s ease-out;
      }

      /* Fade in animations with delays */
      /* Team member card animations */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .animate-fade-in-up {
        animation: fadeInUp 0.6s ease-out forwards;
      }

      /* Staggered animation delays */
      .delay-100 {
        animation-delay: 0.1s;
      }
      .delay-200 {
        animation-delay: 0.2s;
      }
      .delay-300 {
        animation-delay: 0.3s;
      }

      /* Hover effects for team cards */
      .hover-lift {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .hover-lift:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      /* Team photo hover effect */
      .team-photo {
        transition: transform 0.3s ease;
      }

      .team-photo:hover {
        transform: scale(1.1);
      }

      /* ============================================ */
      /* WEATHER ANIMATIONS */
      /* ============================================ */

      /* Enhanced Rain Animation - More Realistic */
      .rain-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 1;
      }

      .rain-drop {
        position: absolute;
        top: -50px;
        width: 2px;
        background: linear-gradient(
          180deg,
          rgba(174, 194, 224, 0.8),
          rgba(255, 255, 255, 0.4)
        );
        border-radius: 2px;
        animation: rain-fall linear infinite;
        opacity: 0.7;
        filter: blur(0.5px);
      }

      .rain-drop::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.9),
          transparent
        );
        border-radius: 2px;
      }

      @keyframes rain-fall {
        0% {
          transform: translateY(0) translateX(0);
          opacity: 0.7;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(100vh) translateX(-20px);
          opacity: 0.3;
        }
      }

      /* Rain Splash Effect */
      .rain-splash {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 2px;
        background: rgba(255, 255, 255, 0.3);
        animation: rain-splash-move linear infinite;
        pointer-events: none;
      }

      @keyframes rain-splash-move {
        to {
          transform: translateX(-100%);
        }
      }

      /* Enhanced Snow Animation */
      .snow-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 1;
      }

      .snow-flake {
        position: absolute;
        top: -10px;
        background: radial-gradient(circle, white, rgba(255, 255, 255, 0.8));
        border-radius: 50%;
        opacity: 0.9;
        animation: snow-fall linear infinite;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
      }

      @keyframes snow-fall {
        0% {
          transform: translateY(0) translateX(0) rotate(0deg);
          opacity: 0.9;
        }
        50% {
          transform: translateY(50vh) translateX(50px) rotate(180deg);
        }
        100% {
          transform: translateY(100vh) translateX(-50px) rotate(360deg);
          opacity: 0.5;
        }
      }

      /* Enhanced Cloud Animation */
      .cloud-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 1;
      }

      .cloud {
        position: absolute;
        left: -300px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 200px;
        box-shadow: 10px 10px 30px rgba(255, 255, 255, 0.3),
          -10px -10px 30px rgba(255, 255, 255, 0.3);
        animation: cloud-move linear infinite;
        filter: blur(2px);
      }

      .cloud::before {
        content: "";
        position: absolute;
        top: -20px;
        left: 30%;
        width: 60%;
        height: 40px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 50px;
        filter: blur(2px);
      }

      .cloud::after {
        content: "";
        position: absolute;
        top: -10px;
        right: 20%;
        width: 50%;
        height: 30px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 40px;
        filter: blur(2px);
      }

      @keyframes cloud-move {
        0% {
          transform: translateX(0);
          opacity: 0;
        }
        10% {
          opacity: 0.8;
        }
        90% {
          opacity: 0.8;
        }
        100% {
          transform: translateX(calc(100vw + 300px));
          opacity: 0;
        }
      }

      /* Enhanced Lightning Animation */
      .lightning-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 2;
      }

      .lightning-flash {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
          circle at 50% 20%,
          rgba(255, 255, 255, 0.9),
          transparent 70%
        );
        opacity: 0;
        animation: lightning 10s ease-in-out infinite;
      }

      .lightning-bolt {
        position: absolute;
        top: 10%;
        left: 50%;
        width: 4px;
        height: 0;
        background: linear-gradient(180deg, #fff, rgba(147, 197, 253, 0.8));
        box-shadow: 0 0 20px rgba(255, 255, 255, 1);
        opacity: 0;
        animation: lightning-bolt 10s ease-in-out infinite;
      }

      @keyframes lightning {
        0%,
        88%,
        100% {
          opacity: 0;
        }
        89%,
        89.5%,
        90%,
        90.5% {
          opacity: 0.95;
        }
        89.2%,
        90.2% {
          opacity: 0;
        }
      }

      @keyframes lightning-bolt {
        0%,
        88%,
        100% {
          opacity: 0;
          height: 0;
        }
        89%,
        90.5% {
          opacity: 1;
          height: 200px;
        }
        89.2%,
        90.2% {
          opacity: 0.3;
        }
      }

      /* Enhanced Fog Animation */
      .fog-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 1;
      }

      .fog {
        position: absolute;
        left: -600px;
        background: radial-gradient(
          ellipse,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        border-radius: 50%;
        filter: blur(60px);
        animation: fog-move linear infinite;
      }

      .fog:nth-child(even) {
        animation-direction: reverse;
        opacity: 0.6;
      }

      @keyframes fog-move {
        0% {
          transform: translateX(0) scale(1);
          opacity: 0;
        }
        10% {
          opacity: 0.8;
        }
        90% {
          opacity: 0.8;
        }
        100% {
          transform: translateX(calc(100vw + 600px)) scale(1.2);
          opacity: 0;
        }
      }

      /* Enhanced Sunny Animation with Sparkles */
      .sun-rays-container {
        position: absolute;
        top: 15%;
        right: 15%;
        width: 120px;
        height: 120px;
        pointer-events: none;
        z-index: 1;
      }

      .sun-ray {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 70px;
        background: linear-gradient(
          180deg,
          rgba(255, 240, 120, 0.9),
          rgba(255, 255, 255, 0.4),
          transparent
        );
        transform-origin: 50% 0;
        animation: sun-rays-rotate 25s linear infinite;
        border-radius: 3px;
        box-shadow: 0 0 10px rgba(255, 240, 120, 0.6);
      }

      .sun-core {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        background: radial-gradient(
          circle,
          rgba(255, 240, 120, 1),
          rgba(255, 200, 100, 0.8)
        );
        border-radius: 50%;
        box-shadow: 0 0 20px rgba(255, 240, 120, 0.8),
          0 0 40px rgba(255, 240, 120, 0.4);
        animation: sun-pulse 3s ease-in-out infinite;
      }

      @keyframes sun-rays-rotate {
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes sun-pulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 1;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.1);
          opacity: 0.9;
        }
      }

      /* Sparkle Effect for Sunny Weather */
      .sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: white;
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(255, 255, 255, 1);
        animation: sparkle-twinkle linear infinite;
        opacity: 0;
      }

      @keyframes sparkle-twinkle {
        0%,
        100% {
          opacity: 0;
          transform: scale(0);
        }
        50% {
          opacity: 1;
          transform: scale(1.5);
        }
      }

      /* Forecast Card Animations */
      .forecast-card-enter {
        animation: forecast-slide-in 0.6s ease-out forwards;
      }

      @keyframes forecast-slide-in {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      .weather-icon-pulse {
        animation: weather-icon-pulse 3s ease-in-out infinite;
      }

      @keyframes weather-icon-pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      /* Temperature Chart Styling */
      .temp-chart-container {
        position: relative;
        height: 200px;
        margin: 20px 0;
      }

      .temp-point {
        position: absolute;
        width: 12px;
        height: 12px;
        background: #3b82f6;
        border: 3px solid white;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 2;
      }

      .temp-point:hover {
        transform: translate(-50%, -50%) scale(1.5);
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
      }

      .temp-label {
        position: absolute;
        transform: translate(-50%, -150%);
        font-weight: bold;
        color: #1e293b;
        font-size: 14px;
        white-space: nowrap;
      }

      /* Hourly Forecast Scrollbar */
      .hourly-scroll::-webkit-scrollbar {
        height: 8px;
      }

      .hourly-scroll::-webkit-scrollbar-track {
        background: #f1f5f9;
        border-radius: 10px;
      }

      .hourly-scroll::-webkit-scrollbar-thumb {
        background: #94a3b8;
        border-radius: 10px;
      }

      .hourly-scroll::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      /* Toggle Switch Styling */
      .toggle-checkbox:checked {
        right: 0;
        border-color: #3b82f6;
      }

      .toggle-checkbox:checked + .toggle-label {
        background-color: #3b82f6;
      }

      /* Highlighted row in truth table */
      .highlight-row {
        background-color: #fef3c7 !important;
        font-weight: 600;
        border: 2px solid #f59e0b;
      }

      /* Mathematical notation styling */
      .math-symbol {
        font-family: "Courier New", monospace;
        font-weight: bold;
        font-size: 1.1em;
      }

      /* Loading spinner */
      .spinner {
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3b82f6;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Line clamp utilities */
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      /* Smooth scroll */
      html {
        scroll-behavior: smooth;
      }

      /* Focus visible for accessibility */
      *:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      /* Checklist styling */
      .checklist-item {
        cursor: pointer;
        user-select: none;
      }

      .checklist-item input:checked + label {
        text-decoration: line-through;
        opacity: 0.6;
      }

      /* Tab styling */
      .tab-button {
        position: relative;
      }

      .tab-button.active::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 3px;
        background: #3b82f6;
        border-radius: 3px 3px 0 0;
      }

      /* Modal backdrop */
      .modal-backdrop {
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
      }

      /* ============================================
           LOADING SCREEN - Ocean Theme
           ============================================ */
      #loading-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          135deg,
          #0369a1 0%,
          #0891b2 50%,
          #06b6d4 100%
        );
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 0.5s ease, visibility 0.5s ease;
      }

      #loading-screen.hidden {
        opacity: 0;
        visibility: hidden;
      }

      .loader {
        width: 80px;
        height: 80px;
        border: 8px solid rgba(255, 255, 255, 0.2);
        border-top: 8px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .loading-text {
        color: white;
        font-size: 1.5rem;
        font-weight: bold;
        margin-top: 20px;
        animation: pulse 1.5s ease-in-out infinite;
      }

      /* ============================================
           SCROLL PROGRESS BAR - Ocean Theme
           ============================================ */
      #scroll-progress {
        position: fixed;
        top: 0;
        left: 0;
        height: 4px;
        background: linear-gradient(90deg, #0369a1, #0891b2, #06b6d4);
        width: 0%;
        z-index: 9998;
        transition: width 0.1s ease;
      }

      /* ============================================
           TOAST NOTIFICATIONS
           ============================================ */
      .toast-container {
        position: fixed;
        top: 80px;
        right: 20px;
        z-index: 9997;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .toast {
        min-width: 300px;
        padding: 16px 20px;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 12px;
        animation: slideInRight 0.3s ease-out;
        backdrop-filter: blur(10px);
      }

      .toast.success {
        background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
        color: white;
      }

      .toast.error {
        background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        color: white;
      }

      .toast.info {
        background: linear-gradient(135deg, #0369a1 0%, #0284c7 100%);
        color: white;
      }

      @keyframes slideInRight {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      /* ============================================
           DARK MODE - Ocean Theme
           ============================================ */
      body.dark-mode {
        background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%);
        color: #e0f2fe;
      }

      body.dark-mode .bg-white {
        background: #2d3748 !important;
        color: #e2e8f0;
      }

      body.dark-mode .text-slate-800 {
        color: #e2e8f0 !important;
      }

      body.dark-mode .text-slate-700 {
        color: #cbd5e0 !important;
      }

      body.dark-mode .text-slate-600 {
        color: #a0aec0 !important;
      }

      body.dark-mode .bg-slate-50 {
        background: #374151 !important;
      }

      /* ============================================
           RIPPLE EFFECT
           ============================================ */
      .ripple {
        position: relative;
        overflow: hidden;
      }

      .ripple::after {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        transform: translate(-50%, -50%);
        transition: width 0.6s, height 0.6s;
      }

      .ripple:active::after {
        width: 300px;
        height: 300px;
      }

      /* ============================================
           PARTICLE BACKGROUND
           ============================================ */
      #particles-js {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 0;
      }

      /* ============================================
           TYPING ANIMATION
           ============================================ */
      .typing-text {
        overflow: hidden;
        border-right: 3px solid rgba(255, 255, 255, 0.75);
        white-space: nowrap;
        animation: typing 3.5s steps(40, end),
          blink-caret 0.75s step-end infinite;
      }

      @keyframes typing {
        from {
          width: 0;
        }
        to {
          width: 100%;
        }
      }

      @keyframes blink-caret {
        from,
        to {
          border-color: transparent;
        }
        50% {
          border-color: rgba(255, 255, 255, 0.75);
        }
      }

      /* ============================================
           COUNTER ANIMATION
           ============================================ */
      .counter {
        font-size: 2.5rem;
        font-weight: bold;
      }

      /* ============================================
           PARALLAX EFFECT
           ============================================ */
      .parallax {
        transition: transform 0.1s ease-out;
      }

      /* ============================================
           WEATHER ANIMATION STYLES
           ============================================ */
      .weather-container {
        position: relative;
        overflow: hidden;
      }

      /* Rain animation */
      .rain-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .rain-drop {
        position: absolute;
        background: linear-gradient(transparent, rgba(255, 255, 255, 0.6));
        width: 2px;
        height: 80px;
        animation: fall linear infinite;
        opacity: 0.7;
      }

      @keyframes fall {
        0% {
          transform: translateY(-100px);
          opacity: 0;
        }
        10% {
          opacity: 0.7;
        }
        90% {
          opacity: 0.7;
        }
        100% {
          transform: translateY(100vh);
          opacity: 0;
        }
      }

      /* Snow animation */
      .snow-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .snow-flake {
        position: absolute;
        background: white;
        border-radius: 50%;
        opacity: 0.8;
        animation: snowfall linear infinite;
      }

      @keyframes snowfall {
        0% {
          transform: translateY(-10px) translateX(0);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(100vh) translateX(50px);
          opacity: 0;
        }
      }

      /* Cloud animation */
      .cloud-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 40%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .cloud {
        position: absolute;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 100px;
        animation: float linear infinite;
        filter: blur(2px);
      }

      .cloud::before,
      .cloud::after {
        content: "";
        position: absolute;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 100px;
      }

      .cloud::before {
        width: 50px;
        height: 50px;
        top: -25px;
        left: 10px;
      }

      .cloud::after {
        width: 60px;
        height: 60px;
        top: -30px;
        right: 10px;
      }

      @keyframes float {
        0% {
          transform: translateX(-200px);
          opacity: 0;
        }
        10% {
          opacity: 0.8;
        }
        90% {
          opacity: 0.8;
        }
        100% {
          transform: translateX(calc(100vw + 200px));
          opacity: 0;
        }
      }

      /* Lightning effect */
      .lightning-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 2;
      }

      @keyframes lightning {
        0%,
        10%,
        20%,
        100% {
          opacity: 0;
        }
        5%,
        15% {
          opacity: 1;
        }
      }

      .lightning-flash {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.8);
        animation: lightning 4s infinite;
      }

      /* Fog/Mist effect */
      .fog-container {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60%;
        pointer-events: none;
        z-index: 1;
        overflow: hidden;
      }

      .fog {
        position: absolute;
        background: rgba(255, 255, 255, 0.15);
        border-radius: 50%;
        filter: blur(40px);
        animation: fogMove linear infinite;
      }

      @keyframes fogMove {
        0% {
          transform: translateX(-50%) translateY(0);
          opacity: 0;
        }
        10% {
          opacity: 0.6;
        }
        90% {
          opacity: 0.6;
        }
        100% {
          transform: translateX(150%) translateY(-20px);
          opacity: 0;
        }
      }

      /* Sunny rays */
      .sun-rays-container {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 300px;
        height: 300px;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 0;
      }

      .sun-ray {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 4px;
        height: 150px;
        background: linear-gradient(
          transparent,
          rgba(255, 255, 200, 0.3),
          transparent
        );
        transform-origin: center -50px;
        animation: rotate 20s linear infinite;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      /* Pulse glow effect */
      .glow-pulse {
        animation: glowPulse 3s ease-in-out infinite;
      }

      @keyframes glowPulse {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        50% {
          box-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
        }
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-cyan-50 via-blue-50 to-sky-100 min-h-screen"
  >
    <!-- Loading Screen -->
    <div id="loading-screen">
      <div class="loader"></div>
      <div class="loading-text">Loading...</div>
    </div>

    <!-- Scroll Progress Bar -->
    <div id="scroll-progress"></div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Header Section - Ocean Theme -->
    <header
      class="bg-gradient-to-r from-sky-700 via-cyan-700 to-blue-700 text-white shadow-2xl sticky top-0 z-50 gradient-animate"
      style="position: relative"
    >
      <div id="particles-js"></div>
      <div
        class="container mx-auto px-4 py-6"
        style="position: relative; z-index: 1"
      >
        <div class="flex flex-col md:flex-row items-center justify-between gap-4">
          <div class="flex items-center gap-4 animate-fade-in-left">
            <i class="fas fa-water text-3xl animate-bounce-subtle"></i>
            <div>
              <h1 class="text-2xl md:text-3xl font-bold typing-text">
                Sistem Pakar Mitigasi Bencana Alam
              </h1>
              <p class="text-cyan-100 text-sm">
                <i class="fas fa-calculator mr-1"></i>
                Implementasi Logika Matematika (Tabel Kebenaran)
              </p>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="flex gap-2 animate-fade-in-right">
            <button
              onclick="openEducationModal()"
              class="ripple px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold backdrop-blur-sm transition-all hover:scale-110 hover-lift icon-spin-hover"
            >
              <i class="fas fa-graduation-cap mr-2"></i>
              Edukasi
            </button>
            <button
              onclick="openChecklistModal()"
              class="ripple px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold backdrop-blur-sm transition-all hover:scale-110 hover-lift icon-spin-hover"
            >
              <i class="fas fa-clipboard-check mr-2"></i>
              Checklist
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Team Section - Ocean Theme -->
    <section class="container mx-auto px-4 py-8">
      <div
        class="bg-gradient-to-r from-sky-700 via-cyan-700 to-blue-700 text-white rounded-2xl shadow-2xl p-4 md:p-8 mb-6"
      >
        <div class="text-center mb-8">
          <!-- Enhanced Project Title with Tagline -->
          <div class="mb-6">
            <h3
              class="text-2xl md:text-3xl font-bold mb-3 flex items-center justify-center gap-3 text-center"
            >
              <i class="fas fa-users text-cyan-300"></i>
              Tim Pengembang (Kelompok 8)
            </h3>
            <h4 class="text-xl font-semibold text-cyan-200 mb-2">
              Sistem Pakar Berbasis Logika Matematika
            </h4>
            <p class="text-cyan-100 text-base italic">
              "Membantu Masyarakat Memahami Risiko Banjir Secara Mandiri"
            </p>
          </div>

          <!-- Project Purpose Explanation -->
          <div
            class="max-w-3xl mx-auto mb-6 p-4 bg-white/10 backdrop-blur-sm rounded-xl border border-cyan-300/30"
          >
            <p class="text-cyan-50 text-sm leading-relaxed mb-3">
              <i class="fas fa-lightbulb text-amber-300 mr-2"></i>
              <strong>Sistem ini mengevaluasi kondisi lingkungan</strong>
              berdasarkan input pengguna dan memberikan rekomendasi mitigasi
              banjir menggunakan logika proposisional.
            </p>
          </div>

          <!-- Team Vision Quote -->
          <div
            class="max-w-3xl mx-auto mt-6 p-4 bg-white/10 backdrop-blur-sm rounded-xl border border-cyan-300/30"
          >
            <p class="text-cyan-50 text-sm leading-relaxed">
              <i class="fas fa-quote-left text-cyan-300 mr-2"></i>
              Kami percaya bahwa teknologi berbasis logika proposisional dapat
              membantu masyarakat memahami dan memitigasi risiko bencana banjir
              secara mandiri. Melalui sistem pakar ini, kami berharap dapat
              memberikan kontribusi nyata dalam upaya pengurangan risiko bencana
              di Indonesia.
              <i class="fas fa-quote-right text-cyan-300 ml-2"></i>
            </p>
          </div>

          <!-- Technology Stack Highlight -->
          <div
            class="max-w-4xl mx-auto mt-8 p-6 bg-white/10 backdrop-blur-sm rounded-xl border border-cyan-300/30"
          >
            <h5
              class="text-lg font-semibold text-white mb-4 flex items-center justify-center gap-2"
            >
              <i class="fas fa-code text-cyan-300"></i>
              Teknologi yang Digunakan
            </h5>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <!-- HTML -->
              <div
                class="flex flex-col items-center p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-all"
              >
                <i class="fab fa-html5 text-3xl text-orange-400 mb-2"></i>
                <span class="text-xs text-white font-medium">HTML5</span>
              </div>
              <!-- CSS/Tailwind -->
              <div
                class="flex flex-col items-center p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-all"
              >
                <i class="fab fa-css3-alt text-3xl text-blue-400 mb-2"></i>
                <span class="text-xs text-white font-medium">CSS/Tailwind</span>
              </div>
              <!-- Python -->
              <div
                class="flex flex-col items-center p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-all"
              >
                <i class="fab fa-python text-3xl text-blue-300 mb-2"></i>
                <span class="text-xs text-white font-medium">Python</span>
              </div>
              <!-- Flask -->
              <div
                class="flex flex-col items-center p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-all"
              >
                <i class="fas fa-flask text-3xl text-gray-300 mb-2"></i>
                <span class="text-xs text-white font-medium">Flask</span>
              </div>
            </div>
            <div class="mt-4 pt-4 border-t border-white/20">
              <div
                class="flex flex-wrap items-center justify-center gap-3 text-xs text-blue-100"
              >
                <span class="flex items-center gap-1">
                  <i class="fas fa-brain text-purple-300"></i>
                  <strong>Logika:</strong> Evaluasi proposisional
                </span>
                <span class="text-white/30">â€¢</span>
                <span class="flex items-center gap-1">
                  <i class="fas fa-cogs text-green-300"></i>
                  <strong>Engine:</strong> Inference sederhana
                </span>
                <span class="text-white/30">â€¢</span>
                <span class="flex items-center gap-1">
                  <i class="fas fa-chart-line text-cyan-300"></i>
                  <strong>Output:</strong> Visualisasi & rekomendasi
                </span>
              </div>
            </div>
          </div>

          <!-- Visual Team Structure -->
          <div
            class="max-w-2xl mx-auto mt-8 p-6 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20"
          >
            <h5
              class="text-lg font-semibold text-white mb-4 flex items-center justify-center gap-2"
            >
              <i class="fas fa-sitemap text-purple-300"></i>
              Struktur Tim
            </h5>
            <div class="flex items-center justify-center gap-6 flex-wrap">
              <div
                class="flex items-center gap-2 bg-cyan-500/30 px-4 py-2 rounded-lg border border-cyan-300/50"
              >
                <i class="fas fa-laptop-code text-cyan-200 text-xl"></i>
                <span class="text-white text-sm font-medium"
                  >Frontend â€” Agna</span
                >
              </div>
              <div
                class="flex items-center gap-2 bg-teal-500/30 px-4 py-2 rounded-lg border border-teal-300/50"
              >
                <i class="fas fa-server text-teal-200 text-xl"></i>
                <span class="text-white text-sm font-medium"
                  >Backend â€” Muhdan</span
                >
              </div>
              <div
                class="flex items-center gap-2 bg-sky-500/30 px-4 py-2 rounded-lg border border-sky-300/50"
              >
                <i class="fas fa-tasks text-sky-200 text-xl"></i>
                <span class="text-white text-sm font-medium">PM â€” Ilman</span>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
          <!-- Member 1: Agna Khoerunnisa -->
          <div
            class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 text-center hover:bg-white/20 hover-lift animate-fade-in-up delay-100 border-l-4 border-cyan-300 relative overflow-hidden"
          >
            <!-- Role Icon Badge -->
            <div
              class="absolute top-4 right-4 bg-cyan-500/40 backdrop-blur-sm p-2 rounded-full border border-cyan-300/60"
            >
              <i class="fas fa-laptop-code text-cyan-200 text-lg"></i>
            </div>
            <div
              class="overflow-hidden rounded-full w-28 h-28 mx-auto mb-4 border-4 border-cyan-300/50 shadow-lg"
            >
              <img
                src="https://cdn.jsdelivr.net/gh/0xMuhdan/UAS-LOGIKA-MATEMATIKA@main/static/images/team/agna.jpg"
                alt="Agna Khoerunnisa"
                class="w-full h-full object-cover team-photo"
                style="object-fit: cover; object-position: center"
                loading="lazy"
                onerror="this.src='https://i.pravatar.cc/150?u=agna-khoerunnisa'"
              />
            </div>

            <h4 class="font-bold text-xl mb-2 text-white">Agna Khoerunnisa</h4>

            <div
              class="inline-flex items-center gap-2 bg-cyan-500/30 backdrop-blur-sm px-4 py-1.5 rounded-full mb-3 border border-cyan-300/40"
            >
              <i class="fas fa-id-card text-cyan-200 text-xs"></i>
              <span class="text-white text-sm font-semibold">2510614068</span>
            </div>

            <div class="mb-3">
              <p class="text-cyan-200 text-sm font-semibold mb-1">
                <i class="fas fa-laptop-code mr-1"></i>
                Frontend Developer
              </p>
              <p class="text-cyan-100 text-xs italic px-4">
                "Merancang antarmuka interaktif dan responsif untuk visualisasi
                logika proposisional"
              </p>
            </div>

            <div class="flex items-center justify-center gap-3">
              <a
                href="https://instagram.com/agnakhoerunnisa"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="Instagram"
              >
                <i class="fab fa-instagram text-xl"></i>
              </a>
              <a
                href="https://linkedin.com/in/agnakhoerunnisa"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="LinkedIn"
              >
                <i class="fab fa-linkedin text-xl"></i>
              </a>
              <a
                href="https://github.com/agnakhoerunnisa"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="GitHub"
              >
                <i class="fab fa-github text-xl"></i>
              </a>
            </div>
          </div>

          <!-- Member 2: Muhdan Firdaus Salam -->
          <div
            class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 text-center hover:bg-white/20 hover-lift animate-fade-in-up delay-200 border-l-4 border-teal-300 relative overflow-hidden"
          >
            <!-- Role Icon Badge -->
            <div
              class="absolute top-4 right-4 bg-teal-500/40 backdrop-blur-sm p-2 rounded-full border border-teal-300/60"
            >
              <i class="fas fa-server text-teal-200 text-lg"></i>
            </div>
            <div
              class="overflow-hidden rounded-full w-28 h-28 mx-auto mb-4 border-4 border-teal-300/50 shadow-lg"
            >
              <img
                src="https://cdn.jsdelivr.net/gh/0xMuhdan/UAS-LOGIKA-MATEMATIKA@main/static/images/team/muhdan.jpg"
                alt="Muhdan Firdaus Salam"
                class="w-full h-full object-cover team-photo"
                style="object-fit: cover; object-position: center"
                loading="lazy"
                onerror="this.src='https://i.pravatar.cc/150?u=muhdan-firdaus-salam'"
              />
            </div>

            <h4 class="font-bold text-xl mb-2 text-white">
              Muhdan Firdaus Salam
            </h4>

            <div
              class="inline-flex items-center gap-2 bg-teal-500/30 backdrop-blur-sm px-4 py-1.5 rounded-full mb-3 border border-teal-300/40"
            >
              <i class="fas fa-id-card text-teal-200 text-xs"></i>
              <span class="text-white text-sm font-semibold">2510614067</span>
            </div>

            <div class="mb-3">
              <p class="text-teal-200 text-sm font-semibold mb-1">
                <i class="fas fa-server mr-1"></i>
                Backend Developer
              </p>
              <p class="text-cyan-100 text-xs italic px-4">
                "Mengimplementasikan logika evaluasi proposisional dan API
                sistem pakar"
              </p>
            </div>

            <div class="flex items-center justify-center gap-3">
              <a
                href="https://www.instagram.com/mhdnf__/#"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="Instagram"
              >
                <i class="fab fa-instagram text-xl"></i>
              </a>
              <a
                href="https://linkedin.com/in/muhdanfirdaus"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="LinkedIn"
              >
                <i class="fab fa-linkedin text-xl"></i>
              </a>
              <a
                href="https://github.com/muhdanfirdaus"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="GitHub"
              >
                <i class="fab fa-github text-xl"></i>
              </a>
            </div>
          </div>

          <!-- Member 3: Muhamad Ilman Pauji -->
          <div
            class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 text-center hover:bg-white/20 hover-lift animate-fade-in-up delay-300 border-l-4 border-sky-300 relative overflow-hidden"
          >
            <!-- Role Icon Badge -->
            <div
              class="absolute top-4 right-4 bg-sky-500/40 backdrop-blur-sm p-2 rounded-full border border-sky-300/60"
            >
              <i class="fas fa-tasks text-sky-200 text-lg"></i>
            </div>
            <div
              class="overflow-hidden rounded-full w-28 h-28 mx-auto mb-4 border-4 border-sky-300/50 shadow-lg"
            >
              <img
                src="https://cdn.jsdelivr.net/gh/0xMuhdan/UAS-LOGIKA-MATEMATIKA@main/static/images/team/ilman.jpg"
                alt="Muhamad Ilman Pauji"
                class="w-full h-full object-cover team-photo"
                style="object-fit: cover; object-position: center"
                loading="lazy"
                onerror="this.src='https://i.pravatar.cc/150?u=muhamad-ilman-pauji'"
              />
            </div>

            <h4 class="font-bold text-xl mb-2 text-white">
              Muhamad Ilman Pauji
            </h4>

            <div
              class="inline-flex items-center gap-2 bg-sky-500/30 backdrop-blur-sm px-4 py-1.5 rounded-full mb-3 border border-sky-300/40"
            >
              <i class="fas fa-id-card text-sky-200 text-xs"></i>
              <span class="text-white text-sm font-semibold">2510614070</span>
            </div>

            <div class="mb-3">
              <p class="text-sky-200 text-sm font-semibold mb-1">
                <i class="fas fa-tasks mr-1"></i>
                Project Manager
              </p>
              <p class="text-cyan-100 text-xs italic px-4">
                "Mengoordinasikan tim dan memastikan integrasi sistem berjalan
                optimal"
              </p>
            </div>

            <div class="flex items-center justify-center gap-3">
              <a
                href="https://instagram.com/ilmanpauji"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="Instagram"
              >
                <i class="fab fa-instagram text-xl"></i>
              </a>
              <a
                href="https://linkedin.com/in/ilmanpauji"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="LinkedIn"
              >
                <i class="fab fa-linkedin text-xl"></i>
              </a>
              <a
                href="https://github.com/ilmanpauji"
                target="_blank"
                rel="noopener noreferrer"
                class="text-white hover:text-blue-200"
                title="GitHub"
              >
                <i class="fab fa-github text-xl"></i>
              </a>
            </div>
          </div>
        </div>

        <!-- Project Timeline & Social Contribution -->
        <div
          class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl mx-auto mt-8"
        >
          <!-- Timeline -->
          <div
            class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-cyan-300/30"
          >
            <h5
              class="text-lg font-semibold text-white mb-4 flex items-center gap-2"
            >
              <i class="fas fa-calendar-alt text-cyan-300"></i>
              Timeline Proyek
            </h5>
            <div class="space-y-3 text-sm">
              <div class="flex items-start gap-3">
                <div class="bg-cyan-500/40 p-2 rounded-lg">
                  <i class="fas fa-search text-cyan-200"></i>
                </div>
                <div>
                  <p class="text-white font-medium">Fase Riset</p>
                  <p class="text-cyan-100 text-xs">
                    Analisis kebutuhan & studi literatur
                  </p>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <div class="bg-teal-500/40 p-2 rounded-lg">
                  <i class="fas fa-code text-teal-200"></i>
                </div>
                <div>
                  <p class="text-white font-medium">Fase Pengembangan</p>
                  <p class="text-cyan-100 text-xs">
                    Implementasi sistem & integrasi
                  </p>
                </div>
              </div>
              <div class="flex items-start gap-3">
                <div class="bg-sky-500/40 p-2 rounded-lg">
                  <i class="fas fa-check-circle text-sky-200"></i>
                </div>
                <div>
                  <p class="text-white font-medium">Fase Pengujian</p>
                  <p class="text-cyan-100 text-xs">Testing & validasi hasil</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Social Contribution -->
          <div
            class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-cyan-300/30"
          >
            <h5
              class="text-lg font-semibold text-white mb-4 flex items-center gap-2"
            >
              <i class="fas fa-heart text-orange-300"></i>
              Kontribusi Sosial
            </h5>
            <div class="space-y-3 text-sm text-cyan-50">
              <div class="flex items-start gap-2">
                <i class="fas fa-check text-teal-300 mt-1"></i>
                <p>
                  Membantu masyarakat awam memahami risiko banjir dengan cara
                  yang mudah dipahami
                </p>
              </div>
              <div class="flex items-start gap-2">
                <i class="fas fa-check text-teal-300 mt-1"></i>
                <p>
                  Memberikan rekomendasi mitigasi yang dapat diterapkan secara
                  mandiri
                </p>
              </div>
              <div class="flex items-start gap-2">
                <i class="fas fa-check text-teal-300 mt-1"></i>
                <p>
                  Dapat digunakan oleh lembaga lokal untuk edukasi pengurangan
                  risiko bencana
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Project Links & Contact -->
        <div
          class="max-w-3xl mx-auto mt-8 p-6 bg-white/10 backdrop-blur-sm rounded-xl border border-cyan-300/30 text-center"
        >
          <h5
            class="text-lg font-semibold text-white mb-4 flex items-center justify-center gap-2"
          >
            <i class="fas fa-link text-cyan-300"></i>
            Akses Proyek
          </h5>
          <div class="flex flex-wrap items-center justify-center gap-4">
            <a
              href="https://github.com/muhdanfirdaus/sistem-pakar-banjir"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 bg-gray-800/50 hover:bg-gray-700/50 px-6 py-3 rounded-lg border border-gray-600/50 transition-all hover:scale-105"
            >
              <i class="fab fa-github text-white text-xl"></i>
              <span class="text-white font-medium">GitHub Repository</span>
            </a>
            <a
              href="http://localhost:5000"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 bg-cyan-600/50 hover:bg-cyan-500/50 px-6 py-3 rounded-lg border border-cyan-400/50 transition-all hover:scale-105"
            >
              <i class="fas fa-globe text-white text-xl"></i>
              <span class="text-white font-medium">Live Demo</span>
            </a>
            <button
              onclick="showProjectQR()"
              class="inline-flex items-center gap-2 bg-sky-600/50 hover:bg-sky-500/50 px-6 py-3 rounded-lg border border-sky-400/50 transition-all hover:scale-105"
            >
              <i class="fas fa-qrcode text-white text-xl"></i>
              <span class="text-white font-medium">QR Code</span>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
      <!-- Tab Navigation -->
      <div
        class="bg-white rounded-2xl shadow-xl p-2 mb-8 animate-fade-in-up hover-lift"
      >
        <div class="flex gap-2 overflow-x-auto">
          <button
            onclick="switchTab('analysis')"
            id="tab-analysis"
            class="tab-button active flex-1 px-6 py-3 rounded-lg font-semibold text-sky-800 hover:bg-cyan-50 transition-all hover:scale-105"
          >
            <i class="fas fa-calculator mr-2"></i>
            Analisis
          </button>
          <button
            onclick="switchTab('statistics')"
            id="tab-statistics"
            class="tab-button flex-1 px-6 py-3 rounded-lg font-semibold text-sky-800 hover:bg-cyan-50 transition-all hover:scale-105"
          >
            <i class="fas fa-chart-line mr-2"></i>
            Statistik
          </button>
          <button
            onclick="switchTab('simulation')"
            id="tab-simulation"
            class="tab-button flex-1 px-6 py-3 rounded-lg font-semibold text-sky-800 hover:bg-cyan-50 transition-all hover:scale-105"
          >
            <i class="fas fa-flask mr-2"></i>
            Simulasi
          </button>
          <button
            onclick="switchTab('weather')"
            id="tab-weather"
            class="tab-button flex-1 px-6 py-3 rounded-lg font-semibold text-sky-800 hover:bg-cyan-50 transition-all hover:scale-105"
          >
            <i class="fas fa-cloud-sun mr-2"></i>
            Cuaca
          </button>
        </div>
      </div>

      <!-- Analysis Tab -->
      <div id="content-analysis" class="tab-content">
        <!-- CONTROL PANEL & HASIL (Side by Side) -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <!-- Left Side: Control Panel -->
          <div
            class="bg-white rounded-2xl shadow-xl p-4 md:p-8 animate-fade-in-left hover-lift"
          >
            <h2
              class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3 animate-fade-in-up"
            >
              <i class="fas fa-sliders text-cyan-600 animate-bounce-subtle"></i>
              1ï¸âƒ£ Input Variabel
            </h2>
            <p
              class="text-sm text-slate-600 mb-6 pb-4 border-b-2 border-slate-200"
            >
              Aktifkan atau nonaktifkan kondisi di bawah untuk mengevaluasi
              risiko banjir
            </p>

            <!-- Variable p: Rainfall -->
            <div
              class="mb-8 p-6 bg-cyan-50 rounded-xl border-2 border-cyan-200 hover-lift animate-fade-in-up delay-100"
            >
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <i class="fas fa-cloud-rain text-3xl text-sky-600"></i>
                  <div>
                    <h3 class="text-lg font-semibold text-slate-800">
                      <span class="math-symbol text-sky-700">p:</span> Curah
                      Hujan Tinggi
                    </h3>
                    <p class="text-sm text-slate-600">
                      Intensitas hujan > 100mm/hari
                    </p>
                  </div>
                </div>
                <!-- Toggle Switch -->
                <div class="relative inline-block w-16 h-8">
                  <input
                    type="checkbox"
                    id="toggle-p"
                    class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer top-1 left-1"
                    onchange="updateSystem()"
                    aria-label="Toggle curah hujan tinggi"
                    role="switch"
                  />
                  <label
                    for="toggle-p"
                    class="toggle-label block overflow-hidden h-8 rounded-full bg-cyan-300 cursor-pointer"
                  ></label>
                </div>
              </div>
            </div>

            <!-- Variable q: Deforestation -->
            <div
              class="mb-8 p-6 bg-teal-50 rounded-xl border-2 border-teal-200 hover-lift animate-fade-in-up delay-200"
            >
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <i class="fas fa-tree text-3xl text-teal-600"></i>
                  <div>
                    <h3 class="text-lg font-semibold text-slate-800">
                      <span class="math-symbol text-teal-700">q:</span> Alih
                      Fungsi Lahan Sawit
                    </h3>
                    <p class="text-sm text-slate-600">
                      Deforestasi & konversi lahan
                    </p>
                  </div>
                </div>
                <!-- Toggle Switch -->
                <div class="relative inline-block w-16 h-8">
                  <input
                    type="checkbox"
                    id="toggle-q"
                    class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer top-1 left-1"
                    onchange="updateSystem()"
                    aria-label="Toggle alih fungsi lahan sawit"
                    role="switch"
                  />
                  <label
                    for="toggle-q"
                    class="toggle-label block overflow-hidden h-8 rounded-full bg-teal-300 cursor-pointer"
                  ></label>
                </div>
              </div>
            </div>

            <!-- Variable r: Drainage -->
            <div
              class="p-6 bg-blue-50 rounded-xl border-2 border-blue-200 hover-lift animate-fade-in-up delay-300"
            >
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center gap-3">
                  <i class="fas fa-water text-3xl text-blue-600"></i>
                  <div>
                    <h3 class="text-lg font-semibold text-slate-800">
                      <span class="math-symbol text-blue-700">r:</span> Sungai
                      Dangkal/Sempit
                    </h3>
                    <p class="text-sm text-slate-600">
                      Drainase buruk & sedimentasi
                    </p>
                  </div>
                </div>
                <!-- Toggle Switch -->
                <div class="relative inline-block w-16 h-8">
                  <input
                    type="checkbox"
                    id="toggle-r"
                    class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer top-1 left-1"
                    onchange="updateSystem()"
                    aria-label="Toggle sungai dangkal/sempit"
                    role="switch"
                  />
                  <label
                    for="toggle-r"
                    class="toggle-label block overflow-hidden h-8 rounded-full bg-blue-300 cursor-pointer"
                  ></label>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Side: Visualization Panel -->
          <div class="space-y-6">
            <!-- Formula Display -->
            <div
              class="bg-white rounded-2xl shadow-xl p-8 animate-fade-in-right hover-lift"
            >
              <h2
                class="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-3 animate-fade-in-up"
              >
                <i
                  class="fas fa-function text-sky-600 animate-bounce-subtle"
                ></i>
                2ï¸âƒ£ Formula Logika
              </h2>
              <div
                class="bg-gradient-to-r from-cyan-50 to-blue-50 p-6 rounded-xl border-2 border-cyan-200 animate-scale-in delay-100"
              >
                <p
                  class="text-4xl font-bold text-center text-slate-800 math-symbol mb-3"
                >
                  S = p âˆ§ (q âˆ¨ r)
                </p>
                <p class="text-center text-slate-600 text-sm leading-relaxed">
                  Risiko Banjir = Hujan Tinggi
                  <span class="font-bold">DAN</span> (Lahan Rusak
                  <span class="font-bold">ATAU</span> Sungai Buruk)
                </p>
              </div>
            </div>

            <!-- Logic Trace -->
            <div
              class="bg-white rounded-2xl shadow-xl p-8 animate-fade-in-right delay-100 hover-lift"
            >
              <h2
                class="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-3 animate-fade-in-up delay-200"
              >
                <i
                  class="fas fa-route text-orange-500 animate-bounce-subtle"
                ></i>
                3ï¸âƒ£ Langkah Perhitungan
              </h2>
              <div id="logic-trace" class="space-y-3">
                <div class="flex justify-center py-8">
                  <div class="spinner"></div>
                </div>
              </div>
            </div>

            <!-- Status Card -->
            <div
              id="status-card"
              class="rounded-2xl shadow-2xl p-8 text-center animate-scale-in"
            >
              <div class="flex flex-col items-center gap-4">
                <i id="status-icon" class="text-7xl"></i>
                <h3 id="status-title" class="text-4xl font-bold"></h3>
                <p id="status-subtitle" class="text-xl"></p>
              </div>
            </div>

            <!-- Recommendation -->
            <div
              class="bg-white rounded-2xl shadow-xl p-8 animate-fade-in-right delay-300 hover-lift"
            >
              <h2
                class="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-3 animate-fade-in-up delay-400"
              >
                <i
                  class="fas fa-lightbulb text-amber-500 animate-bounce-subtle"
                ></i>
                4ï¸âƒ£ Rekomendasi Mitigasi
              </h2>
              <div
                id="recommendation"
                class="bg-amber-50 p-6 rounded-xl border-2 border-amber-200"
              >
                <div class="flex justify-center py-4">
                  <div class="spinner"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- SECTION 3: TABEL KEBENARAN (Moved Here!) -->
        <div
          class="bg-white rounded-2xl shadow-xl p-8 mb-8 animate-fade-in-up hover-lift"
        >
          <div class="mb-6">
            <h2
              class="text-3xl font-bold text-slate-800 mb-3 flex items-center gap-3"
            >
              <i class="fas fa-table text-indigo-600 animate-bounce-subtle"></i>
              5ï¸âƒ£ Tabel Kebenaran Lengkap
            </h2>
            <p class="text-slate-600 text-lg">
              Tabel di bawah menampilkan
              <span class="font-bold text-indigo-600">8 kombinasi</span>
              kemungkinan. Baris yang sesuai dengan input Anda akan
              <span class="font-bold text-yellow-600">di-highlight</span> secara
              otomatis.
            </p>
          </div>

          <!-- Stats Summary -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div
              class="bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-4 border-2 border-blue-200"
            >
              <div class="flex items-center gap-3">
                <div class="bg-blue-500 rounded-full p-3">
                  <i class="fas fa-list text-white text-xl"></i>
                </div>
                <div>
                  <p class="text-2xl font-bold text-blue-600">8</p>
                  <p class="text-sm text-slate-600">Total Skenario</p>
                </div>
              </div>
            </div>

            <div
              class="bg-gradient-to-br from-green-50 to-teal-50 rounded-xl p-4 border-2 border-green-200"
            >
              <div class="flex items-center gap-3">
                <div class="bg-green-500 rounded-full p-3">
                  <i class="fas fa-shield-alt text-white text-xl"></i>
                </div>
                <div>
                  <p class="text-2xl font-bold text-green-600">5</p>
                  <p class="text-sm text-slate-600">Kondisi Aman (62.5%)</p>
                </div>
              </div>
            </div>

            <div
              class="bg-gradient-to-br from-red-50 to-orange-50 rounded-xl p-4 border-2 border-red-200"
            >
              <div class="flex items-center gap-3">
                <div class="bg-red-500 rounded-full p-3">
                  <i class="fas fa-exclamation-triangle text-white text-xl"></i>
                </div>
                <div>
                  <p class="text-2xl font-bold text-red-600">3</p>
                  <p class="text-sm text-slate-600">Risiko Banjir (37.5%)</p>
                </div>
              </div>
            </div>
          </div>

          <div class="overflow-x-auto">
            <table class="w-full border-collapse" id="truth-table">
              <thead>
                <tr
                  class="bg-gradient-to-r from-indigo-600 to-blue-600 text-white"
                >
                  <th
                    class="border-2 border-slate-300 px-6 py-4 text-center font-bold"
                  >
                    <span class="math-symbol text-xl">p</span><br />
                    <span class="text-xs font-normal">(Curah Hujan)</span>
                  </th>
                  <th
                    class="border-2 border-slate-300 px-6 py-4 text-center font-bold"
                  >
                    <span class="math-symbol text-xl">q</span><br />
                    <span class="text-xs font-normal">(Lahan Sawit)</span>
                  </th>
                  <th
                    class="border-2 border-slate-300 px-6 py-4 text-center font-bold"
                  >
                    <span class="math-symbol text-xl">r</span><br />
                    <span class="text-xs font-normal">(Sungai Buruk)</span>
                  </th>
                  <th
                    class="border-2 border-slate-300 px-6 py-4 text-center font-bold"
                  >
                    <span class="math-symbol text-xl">q âˆ¨ r</span><br />
                    <span class="text-xs font-normal">(Lahan OR Sungai)</span>
                  </th>
                  <th
                    class="border-2 border-slate-300 px-6 py-4 text-center font-bold"
                  >
                    <span class="math-symbol text-xl">S = p âˆ§ (q âˆ¨ r)</span
                    ><br />
                    <span class="text-xs font-normal">(Risiko Banjir)</span>
                  </th>
                </tr>
              </thead>
              <tbody id="truth-table-body">
                <!-- Will be populated by JavaScript -->
              </tbody>
            </table>
          </div>

          <!-- Legend -->
          <div
            class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-slate-50 rounded-xl border-2 border-slate-200"
          >
            <div class="flex items-center gap-3">
              <div
                class="bg-yellow-200 border-2 border-yellow-600 w-12 h-12 rounded flex items-center justify-center"
              >
                <i class="fas fa-arrow-right text-yellow-700"></i>
              </div>
              <div>
                <p class="font-bold text-slate-800">Baris Ter-highlight</p>
                <p class="text-xs text-slate-600">
                  Menunjukkan kondisi input saat ini
                </p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <div
                class="bg-red-100 w-12 h-12 rounded flex items-center justify-center"
              >
                <i class="fas fa-exclamation-triangle text-red-600"></i>
              </div>
              <div>
                <p class="font-bold text-slate-800">Background Merah</p>
                <p class="text-xs text-slate-600">
                  Menandakan risiko banjir terdeteksi
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Project Description Section -->
        <div
          class="bg-gradient-to-br from-cyan-50 via-blue-50 to-sky-50 rounded-2xl shadow-xl p-8 mb-8 border-2 border-cyan-100 animate-fade-in-up delay-100 hover-lift"
        >
          <div class="flex items-start gap-4 mb-6">
            <div
              class="bg-sky-600 rounded-full p-3 flex-shrink-0 animate-bounce-subtle"
            >
              <i class="fas fa-info-circle text-white text-2xl"></i>
            </div>
            <div>
              <h2 class="text-2xl font-bold text-slate-800 mb-2">
                Tentang Sistem Pakar Mitigasi Bencana Alam
              </h2>
              <p class="text-slate-600 leading-relaxed">
                Sistem ini merupakan implementasi
                <span class="font-semibold text-sky-700"
                  >Logika Proposisional</span
                >
                dan
                <span class="font-semibold text-sky-700">Tabel Kebenaran</span>
                untuk mengidentifikasi risiko banjir berdasarkan kondisi
                lingkungan. Menggunakan pendekatan matematis berbasis logika
                Boolean, sistem dapat mengevaluasi kombinasi faktor-faktor
                risiko secara sistematis dan memberikan rekomendasi mitigasi
                yang tepat.
              </p>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
            <div
              class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-cyan-200 hover-lift animate-scale-in delay-200"
            >
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-brain text-sky-600 text-xl"></i>
                <h3 class="font-bold text-slate-800">Metode</h3>
              </div>
              <p class="text-sm text-slate-600">
                Logika Proposisional dengan operator AND (âˆ§) dan OR (âˆ¨)
              </p>
            </div>

            <div
              class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-cyan-200 hover-lift animate-scale-in delay-300"
            >
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-bullseye text-cyan-600 text-xl"></i>
                <h3 class="font-bold text-slate-800">Tujuan</h3>
              </div>
              <p class="text-sm text-slate-600">
                Identifikasi dini risiko banjir untuk mitigasi proaktif
              </p>
            </div>

            <div
              class="bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-cyan-200 hover-lift animate-scale-in delay-400"
            >
              <div class="flex items-center gap-3 mb-2">
                <i class="fas fa-map-marked-alt text-teal-600 text-xl"></i>
                <h3 class="font-bold text-slate-800">Cakupan</h3>
              </div>
              <p class="text-sm text-slate-600">
                Daerah rawan banjir dengan berbagai kondisi geografis
              </p>
            </div>
          </div>
        </div>

        <!-- Statistical Analysis Section -->
        <div
          class="bg-white rounded-2xl shadow-xl p-8 mb-8 animate-fade-in-up delay-200 hover-lift"
        >
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i
              class="fas fa-chart-bar text-emerald-600 animate-bounce-subtle"
            ></i>
            Analisis Statistik Tabel Kebenaran
          </h2>

          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6"
          >
            <!-- Total Scenarios -->
            <div
              class="bg-gradient-to-br from-sky-600 to-cyan-600 rounded-xl p-6 text-white shadow-lg hover-lift animate-scale-in delay-100 parallax"
              data-speed="10"
            >
              <div class="flex items-center justify-between mb-3">
                <i class="fas fa-list-ol text-4xl opacity-30"></i>
                <div class="text-right">
                  <p class="text-cyan-100 text-sm font-semibold mb-1">
                    Total Skenario
                  </p>
                  <p class="counter text-4xl font-bold" data-target="8">0</p>
                  <p class="text-xs text-cyan-100 mt-1">2Â³ kombinasi</p>
                </div>
              </div>
            </div>

            <!-- Safe Scenarios -->
            <div
              class="bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl p-6 text-white shadow-lg hover-lift animate-scale-in delay-200 parallax"
              data-speed="15"
            >
              <div class="flex items-center justify-between mb-3">
                <i class="fas fa-shield-alt text-4xl opacity-30"></i>
                <div class="text-right">
                  <p class="text-teal-100 text-sm font-semibold mb-1">
                    Kondisi Aman
                  </p>
                  <p class="counter text-4xl font-bold" data-target="5">0</p>
                  <p class="text-xs text-teal-100 mt-1">62.5% kasus</p>
                </div>
              </div>
            </div>

            <!-- Risk Scenarios -->
            <div
              class="bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white shadow-lg hover-lift animate-scale-in delay-300 parallax"
              data-speed="20"
            >
              <div class="flex items-center justify-between mb-3">
                <i class="fas fa-exclamation-triangle text-4xl opacity-30"></i>
                <div class="text-right">
                  <p class="text-red-100 text-sm font-semibold mb-1">
                    Risiko Banjir
                  </p>
                  <p class="counter text-4xl font-bold" data-target="3">0</p>
                  <p class="text-xs text-red-100 mt-1">37.5% kasus</p>
                </div>
              </div>
            </div>

            <!-- Critical Factor -->
            <div
              class="bg-gradient-to-br from-sky-500 to-blue-600 rounded-xl p-6 text-white shadow-lg hover-lift animate-scale-in delay-400"
            >
              <div class="flex items-center justify-between mb-3">
                <i class="fas fa-key text-4xl opacity-30"></i>
                <div class="text-right">
                  <p class="text-sky-100 text-sm font-semibold mb-1">
                    Faktor Kritis
                  </p>
                  <p class="text-2xl font-bold">Curah Hujan</p>
                  <p class="text-xs text-sky-100 mt-1">Variabel penentu</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Statistical Insights -->
          <div
            class="bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl p-6 border-2 border-cyan-200"
          >
            <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
              <i class="fas fa-lightbulb text-amber-500"></i>
              Insight Statistik
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="flex items-start gap-3">
                <i class="fas fa-check-circle text-teal-600 mt-1"></i>
                <p class="text-sm text-slate-700">
                  <span class="font-semibold">Dominasi Kondisi Aman:</span> Dari
                  8 skenario, 5 skenario (62.5%) menghasilkan kondisi aman,
                  menunjukkan bahwa risiko banjir hanya terjadi pada kombinasi
                  faktor tertentu.
                </p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fas fa-water text-cyan-600 mt-1"></i>
                <p class="text-sm text-slate-700">
                  <span class="font-semibold">Peran Curah Hujan:</span> Semua 3
                  skenario risiko banjir memerlukan curah hujan tinggi (p=TRUE),
                  menjadikannya faktor paling kritis dalam sistem.
                </p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fas fa-project-diagram text-sky-600 mt-1"></i>
                <p class="text-sm text-slate-700">
                  <span class="font-semibold">Kombinasi Faktor:</span> Risiko
                  banjir terjadi ketika curah hujan tinggi DAN minimal satu dari
                  dua kondisi (lahan rusak ATAU sungai buruk) terpenuhi.
                </p>
              </div>
              <div class="flex items-start gap-3">
                <i class="fas fa-chart-line text-orange-600 mt-1"></i>
                <p class="text-sm text-slate-700">
                  <span class="font-semibold">Probabilitas Risiko:</span> Dengan
                  asumsi distribusi seragam, probabilitas terjadinya risiko
                  banjir adalah 37.5% dari semua kemungkinan kondisi lingkungan.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Variable Details Section -->
        <div
          class="bg-white rounded-2xl shadow-xl p-8 mb-8 animate-fade-in-up delay-300 hover-lift"
        >
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i
              class="fas fa-microscope text-cyan-600 animate-bounce-subtle"
            ></i>
            Penjelasan Detail Variabel Input
          </h2>

          <p class="text-slate-600 mb-6">
            Setiap variabel proposisional dalam sistem ini dipilih berdasarkan
            kajian literatur dan data empiris kondisi bencana banjir di Aceh.
            Berikut adalah kriteria teknis untuk setiap variabel:
          </p>

          <div class="space-y-4">
            <!-- Variable p -->
            <div
              class="border-l-4 border-sky-500 bg-sky-50 rounded-r-xl p-6 hover-lift animate-fade-in-left delay-100"
            >
              <div class="flex items-start gap-4">
                <div
                  class="bg-sky-600 rounded-full p-3 flex-shrink-0 animate-bounce-subtle"
                >
                  <i class="fas fa-cloud-rain text-white text-xl"></i>
                </div>
                <div class="flex-1">
                  <h3 class="text-xl font-bold text-slate-800 mb-2">
                    <span class="math-symbol text-sky-700">p:</span> Curah Hujan
                    Tinggi
                  </h3>
                  <div class="space-y-2 text-sm text-slate-700">
                    <p>
                      <span class="font-semibold text-sky-700">Definisi:</span>
                      Intensitas curah hujan yang melebihi ambang batas normal
                      untuk wilayah Aceh.
                    </p>
                    <p>
                      <span class="font-semibold text-sky-700"
                        >Kriteria TRUE:</span
                      >
                      Curah hujan > 100 mm/hari atau > 300 mm/minggu
                    </p>
                    <p>
                      <span class="font-semibold text-sky-700"
                        >Kriteria FALSE:</span
                      >
                      Curah hujan â‰¤ 100 mm/hari
                    </p>
                    <p>
                      <span class="font-semibold text-sky-700"
                        >Justifikasi:</span
                      >
                      Berdasarkan data BMKG, intensitas hujan > 100 mm/hari
                      dikategorikan sebagai "hujan sangat lebat" yang merupakan
                      pemicu utama banjir bandang di daerah dengan topografi
                      berbukit seperti Aceh.
                    </p>
                    <p>
                      <span class="font-semibold text-sky-700">Dampak:</span>
                      Curah hujan tinggi menyebabkan limpasan permukaan (surface
                      runoff) yang melebihi kapasitas infiltrasi tanah dan daya
                      tampung sungai.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Variable q -->
            <div
              class="border-l-4 border-teal-500 bg-teal-50 rounded-r-xl p-6 hover-lift animate-fade-in-left delay-200"
            >
              <div class="flex items-start gap-4">
                <div
                  class="bg-teal-600 rounded-full p-3 flex-shrink-0 animate-bounce-subtle"
                >
                  <i class="fas fa-tree text-white text-xl"></i>
                </div>
                <div class="flex-1">
                  <h3 class="text-xl font-bold text-slate-800 mb-2">
                    <span class="math-symbol text-teal-700">q:</span> Alih
                    Fungsi Lahan Sawit
                  </h3>
                  <div class="space-y-2 text-sm text-slate-700">
                    <p>
                      <span class="font-semibold text-teal-700">Definisi:</span>
                      Konversi lahan hutan atau lahan pertanian tradisional
                      menjadi perkebunan kelapa sawit.
                    </p>
                    <p>
                      <span class="font-semibold text-teal-700"
                        >Kriteria TRUE:</span
                      >
                      Terdapat deforestasi signifikan (> 30% area) atau konversi
                      lahan dalam 5 tahun terakhir
                    </p>
                    <p>
                      <span class="font-semibold text-teal-700"
                        >Kriteria FALSE:</span
                      >
                      Tutupan hutan terjaga atau tidak ada konversi lahan
                      signifikan
                    </p>
                    <p>
                      <span class="font-semibold text-teal-700"
                        >Justifikasi:</span
                      >
                      Penelitian menunjukkan bahwa konversi hutan menjadi
                      perkebunan sawit mengurangi kapasitas infiltrasi air
                      hingga 40-60%, meningkatkan limpasan permukaan yang memicu
                      banjir.
                    </p>
                    <p>
                      <span class="font-semibold text-teal-700">Dampak:</span>
                      Hilangnya fungsi hutan sebagai penyerap air alami,
                      perubahan pola aliran air, dan peningkatan erosi tanah
                      yang memperburuk risiko banjir.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Variable r -->
            <div
              class="border-l-4 border-blue-500 bg-blue-50 rounded-r-xl p-6 hover-lift animate-fade-in-left delay-300"
            >
              <div class="flex items-start gap-4">
                <div
                  class="bg-blue-600 rounded-full p-3 flex-shrink-0 animate-bounce-subtle"
                >
                  <i class="fas fa-water text-white text-xl"></i>
                </div>
                <div class="flex-1">
                  <h3 class="text-xl font-bold text-slate-800 mb-2">
                    <span class="math-symbol text-blue-700">r:</span> Sungai
                    Dangkal/Sempit
                  </h3>
                  <div class="space-y-2 text-sm text-slate-700">
                    <p>
                      <span class="font-semibold text-blue-700">Definisi:</span>
                      Kondisi sistem drainase sungai yang buruk akibat
                      sedimentasi atau penyempitan alur.
                    </p>
                    <p>
                      <span class="font-semibold text-blue-700"
                        >Kriteria TRUE:</span
                      >
                      Kedalaman sungai < 3 meter atau lebar < 10 meter di area
                      kritis, atau terdapat sedimentasi > 50% dari kapasitas
                      normal
                    </p>
                    <p>
                      <span class="font-semibold text-blue-700"
                        >Kriteria FALSE:</span
                      >
                      Sistem drainase berfungsi baik dengan dimensi memadai
                    </p>
                    <p>
                      <span class="font-semibold text-blue-700"
                        >Justifikasi:</span
                      >
                      Data dari Dinas Pekerjaan Umum Aceh menunjukkan bahwa 70%
                      kejadian banjir terkait dengan pendangkalan sungai akibat
                      sedimentasi dan sampah yang mengurangi kapasitas aliran
                      hingga 60%.
                    </p>
                    <p>
                      <span class="font-semibold text-blue-700">Dampak:</span>
                      Penurunan kapasitas tampung sungai menyebabkan luapan air
                      lebih cepat saat curah hujan tinggi, terutama di daerah
                      hilir dan dataran rendah.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Mathematical Foundation -->
          <div
            class="mt-6 bg-gradient-to-r from-cyan-50 to-sky-50 rounded-xl p-6 border-2 border-cyan-200"
          >
            <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
              <i class="fas fa-calculator text-sky-600"></i>
              Landasan Matematis
            </h3>
            <p class="text-sm text-slate-700 mb-3">
              Formula logika
              <span class="math-symbol font-bold text-sky-700"
                >S = p âˆ§ (q âˆ¨ r)</span
              >
              mencerminkan hubungan kausal antara faktor-faktor risiko:
            </p>
            <ul class="space-y-2 text-sm text-slate-700">
              <li class="flex items-start gap-2">
                <i class="fas fa-angle-right text-sky-600 mt-1"></i>
                <span
                  ><span class="font-semibold">Operator AND (âˆ§):</span>
                  Menunjukkan bahwa curah hujan tinggi adalah
                  <em>kondisi necessary</em> (syarat perlu) untuk terjadinya
                  banjir.</span
                >
              </li>
              <li class="flex items-start gap-2">
                <i class="fas fa-angle-right text-sky-600 mt-1"></i>
                <span
                  ><span class="font-semibold">Operator OR (âˆ¨):</span>
                  Menunjukkan bahwa kerusakan lahan atau drainase buruk adalah
                  <em>kondisi sufficient</em> (syarat cukup) yang memperkuat
                  risiko.</span
                >
              </li>
              <li class="flex items-start gap-2">
                <i class="fas fa-angle-right text-sky-600 mt-1"></i>
                <span
                  ><span class="font-semibold">Interpretasi:</span> Banjir
                  terjadi jika dan hanya jika ada curah hujan tinggi DAN
                  setidaknya satu faktor penguat (lahan rusak ATAU drainase
                  buruk).</span
                >
              </li>
            </ul>
          </div>
        </div>

        <!-- Logic Flow Diagram Section -->
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i class="fas fa-project-diagram text-sky-600"></i>
            Diagram Alur Logika Sistem
          </h2>

          <div
            class="bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-8 border-2 border-slate-200"
          >
            <!-- Flow Diagram -->
            <div class="flex flex-col items-center space-y-6">
              <!-- Input Stage -->
              <div class="w-full max-w-4xl">
                <div class="text-center mb-4">
                  <span
                    class="bg-sky-600 text-white px-4 py-2 rounded-full text-sm font-bold"
                  >
                    <i class="fas fa-sign-in-alt mr-2"></i>TAHAP 1: INPUT
                  </span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div
                    class="bg-white rounded-lg p-4 shadow-md border-2 border-sky-300"
                  >
                    <div class="text-center">
                      <i
                        class="fas fa-cloud-rain text-sky-600 text-3xl mb-2"
                      ></i>
                      <p class="font-bold text-slate-800">Variabel p</p>
                      <p class="text-xs text-slate-600 mt-1">Curah Hujan</p>
                      <div class="mt-2 flex justify-center gap-2">
                        <span
                          class="bg-teal-100 text-teal-700 px-2 py-1 rounded text-xs font-semibold"
                          >TRUE</span
                        >
                        <span
                          class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-semibold"
                          >FALSE</span
                        >
                      </div>
                    </div>
                  </div>
                  <div
                    class="bg-white rounded-lg p-4 shadow-md border-2 border-teal-300"
                  >
                    <div class="text-center">
                      <i class="fas fa-tree text-teal-600 text-3xl mb-2"></i>
                      <p class="font-bold text-slate-800">Variabel q</p>
                      <p class="text-xs text-slate-600 mt-1">
                        Alih Fungsi Lahan
                      </p>
                      <div class="mt-2 flex justify-center gap-2">
                        <span
                          class="bg-teal-100 text-teal-700 px-2 py-1 rounded text-xs font-semibold"
                          >TRUE</span
                        >
                        <span
                          class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-semibold"
                          >FALSE</span
                        >
                      </div>
                    </div>
                  </div>
                  <div
                    class="bg-white rounded-lg p-4 shadow-md border-2 border-blue-300"
                  >
                    <div class="text-center">
                      <i class="fas fa-water text-blue-600 text-3xl mb-2"></i>
                      <p class="font-bold text-slate-800">Variabel r</p>
                      <p class="text-xs text-slate-600 mt-1">Kondisi Sungai</p>
                      <div class="mt-2 flex justify-center gap-2">
                        <span
                          class="bg-teal-100 text-teal-700 px-2 py-1 rounded text-xs font-semibold"
                          >TRUE</span
                        >
                        <span
                          class="bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-semibold"
                          >FALSE</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Arrow Down -->
              <div class="flex flex-col items-center">
                <i class="fas fa-arrow-down text-4xl text-slate-400"></i>
              </div>

              <!-- Processing Stage -->
              <div class="w-full max-w-4xl">
                <div class="text-center mb-4">
                  <span
                    class="bg-cyan-600 text-white px-4 py-2 rounded-full text-sm font-bold"
                  >
                    <i class="fas fa-cogs mr-2"></i>TAHAP 2: EVALUASI LOGIKA
                  </span>
                </div>
                <div
                  class="bg-white rounded-lg p-6 shadow-lg border-2 border-cyan-300"
                >
                  <div class="space-y-4">
                    <!-- Step 1 -->
                    <div class="flex items-center gap-4">
                      <div
                        class="bg-cyan-100 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0"
                      >
                        <span class="font-bold text-cyan-700">1</span>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm font-semibold text-slate-800">
                          Evaluasi Sub-formula:
                          <span class="math-symbol text-cyan-700">q âˆ¨ r</span>
                        </p>
                        <p class="text-xs text-slate-600">
                          Cek apakah lahan rusak ATAU sungai buruk
                        </p>
                      </div>
                      <div class="bg-cyan-50 px-3 py-1 rounded-lg">
                        <code class="text-xs font-mono text-cyan-700"
                          >q OR r</code
                        >
                      </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="flex items-center gap-4">
                      <div
                        class="bg-cyan-100 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0"
                      >
                        <span class="font-bold text-cyan-700">2</span>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm font-semibold text-slate-800">
                          Evaluasi Formula Utama:
                          <span class="math-symbol text-cyan-700"
                            >p âˆ§ (q âˆ¨ r)</span
                          >
                        </p>
                        <p class="text-xs text-slate-600">
                          Cek apakah hujan tinggi DAN hasil langkah 1
                        </p>
                      </div>
                      <div class="bg-cyan-50 px-3 py-1 rounded-lg">
                        <code class="text-xs font-mono text-cyan-700"
                          >p AND (q OR r)</code
                        >
                      </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="flex items-center gap-4">
                      <div
                        class="bg-cyan-100 rounded-full w-8 h-8 flex items-center justify-center flex-shrink-0"
                      >
                        <span class="font-bold text-cyan-700">3</span>
                      </div>
                      <div class="flex-1">
                        <p class="text-sm font-semibold text-slate-800">
                          Tentukan Status:
                          <span class="math-symbol text-cyan-700">S</span>
                        </p>
                        <p class="text-xs text-slate-600">
                          Hasil akhir TRUE (Risiko) atau FALSE (Aman)
                        </p>
                      </div>
                      <div class="bg-cyan-50 px-3 py-1 rounded-lg">
                        <code class="text-xs font-mono text-cyan-700"
                          >Result â†’ S</code
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Arrow Down -->
              <div class="flex flex-col items-center">
                <i class="fas fa-arrow-down text-4xl text-slate-400"></i>
              </div>

              <!-- Output Stage -->
              <div class="w-full max-w-4xl">
                <div class="text-center mb-4">
                  <span
                    class="bg-teal-600 text-white px-4 py-2 rounded-full text-sm font-bold"
                  >
                    <i class="fas fa-sign-out-alt mr-2"></i>TAHAP 3: OUTPUT &
                    REKOMENDASI
                  </span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div
                    class="bg-gradient-to-br from-teal-500 to-teal-600 rounded-lg p-6 shadow-lg text-white"
                  >
                    <div class="text-center">
                      <i class="fas fa-shield-alt text-5xl mb-3 opacity-80"></i>
                      <p class="font-bold text-xl mb-2">S = FALSE</p>
                      <p class="text-sm mb-3">Kondisi Aman</p>
                      <div class="bg-white/20 rounded-lg p-3 text-xs">
                        <p class="font-semibold mb-1">Rekomendasi:</p>
                        <p>Tetap waspada dan pantau cuaca</p>
                      </div>
                    </div>
                  </div>
                  <div
                    class="bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-6 shadow-lg text-white"
                  >
                    <div class="text-center">
                      <i
                        class="fas fa-exclamation-triangle text-5xl mb-3 opacity-80"
                      ></i>
                      <p class="font-bold text-xl mb-2">S = TRUE</p>
                      <p class="text-sm mb-3">Risiko Banjir Terdeteksi</p>
                      <div class="bg-white/20 rounded-lg p-3 text-xs">
                        <p class="font-semibold mb-1">Rekomendasi:</p>
                        <p>Evakuasi & tindakan mitigasi segera</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Critical Scenarios Comparison -->
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i class="fas fa-exclamation-circle text-red-600"></i>
            Analisis Skenario Kritis
          </h2>

          <p class="text-slate-600 mb-6">
            Dari 8 skenario dalam tabel kebenaran, berikut adalah 3 kombinasi
            paling berbahaya yang menghasilkan risiko banjir:
          </p>

          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Scenario 1: Most Critical -->
            <div
              class="bg-gradient-to-br from-red-50 to-orange-50 rounded-xl p-6 border-2 border-red-300 shadow-lg"
            >
              <div class="flex items-center justify-between mb-4">
                <span
                  class="bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold"
                >
                  PALING KRITIS
                </span>
                <i class="fas fa-skull-crossbones text-red-600 text-2xl"></i>
              </div>

              <h3 class="font-bold text-lg text-slate-800 mb-3">Skenario #8</h3>

              <div class="space-y-2 mb-4">
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-red-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">p = TRUE:</span> Hujan
                    Tinggi</span
                  >
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-red-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">q = TRUE:</span> Lahan
                    Rusak</span
                  >
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-red-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">r = TRUE:</span> Sungai
                    Buruk</span
                  >
                </div>
              </div>

              <div class="bg-white rounded-lg p-3 mb-3">
                <p class="text-xs font-semibold text-red-700 mb-1">
                  Tingkat Bahaya:
                </p>
                <div class="flex gap-1">
                  <div class="flex-1 h-2 bg-red-600 rounded"></div>
                  <div class="flex-1 h-2 bg-red-600 rounded"></div>
                  <div class="flex-1 h-2 bg-red-600 rounded"></div>
                  <div class="flex-1 h-2 bg-red-600 rounded"></div>
                  <div class="flex-1 h-2 bg-red-600 rounded"></div>
                </div>
                <p class="text-xs text-center mt-1 font-bold text-red-700">
                  5/5 - EKSTREM
                </p>
              </div>

              <div class="bg-red-100 rounded-lg p-3 border border-red-300">
                <p class="text-xs font-semibold text-red-800 mb-1">
                  <i class="fas fa-info-circle mr-1"></i>Analisis:
                </p>
                <p class="text-xs text-red-900">
                  Kombinasi terburuk! Semua faktor risiko aktif. Curah hujan
                  tinggi bertemu dengan lahan yang tidak mampu menyerap air DAN
                  sistem drainase yang sudah jenuh. Potensi banjir bandang
                  sangat tinggi dengan waktu respons minimal.
                </p>
              </div>
            </div>

            <!-- Scenario 2: High Risk -->
            <div
              class="bg-gradient-to-br from-orange-50 to-yellow-50 rounded-xl p-6 border-2 border-orange-300 shadow-lg"
            >
              <div class="flex items-center justify-between mb-4">
                <span
                  class="bg-orange-600 text-white px-3 py-1 rounded-full text-xs font-bold"
                >
                  RISIKO TINGGI
                </span>
                <i
                  class="fas fa-exclamation-triangle text-orange-600 text-2xl"
                ></i>
              </div>

              <h3 class="font-bold text-lg text-slate-800 mb-3">Skenario #7</h3>

              <div class="space-y-2 mb-4">
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-orange-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">p = TRUE:</span> Hujan
                    Tinggi</span
                  >
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-orange-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">q = TRUE:</span> Lahan
                    Rusak</span
                  >
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-times-circle text-teal-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">r = FALSE:</span> Sungai
                    Normal</span
                  >
                </div>
              </div>

              <div class="bg-white rounded-lg p-3 mb-3">
                <p class="text-xs font-semibold text-orange-700 mb-1">
                  Tingkat Bahaya:
                </p>
                <div class="flex gap-1">
                  <div class="flex-1 h-2 bg-orange-600 rounded"></div>
                  <div class="flex-1 h-2 bg-orange-600 rounded"></div>
                  <div class="flex-1 h-2 bg-orange-600 rounded"></div>
                  <div class="flex-1 h-2 bg-orange-600 rounded"></div>
                  <div class="flex-1 h-2 bg-slate-300 rounded"></div>
                </div>
                <p class="text-xs text-center mt-1 font-bold text-orange-700">
                  4/5 - TINGGI
                </p>
              </div>

              <div
                class="bg-orange-100 rounded-lg p-3 border border-orange-300"
              >
                <p class="text-xs font-semibold text-orange-800 mb-1">
                  <i class="fas fa-info-circle mr-1"></i>Analisis:
                </p>
                <p class="text-xs text-orange-900">
                  Meskipun sistem drainase masih berfungsi, kerusakan lahan
                  akibat deforestasi menyebabkan limpasan permukaan berlebihan.
                  Risiko banjir tetap tinggi terutama di area dengan tutupan
                  lahan minimal.
                </p>
              </div>
            </div>

            <!-- Scenario 3: Moderate-High Risk -->
            <div
              class="bg-gradient-to-br from-yellow-50 to-amber-50 rounded-xl p-6 border-2 border-yellow-300 shadow-lg"
            >
              <div class="flex items-center justify-between mb-4">
                <span
                  class="bg-yellow-600 text-white px-3 py-1 rounded-full text-xs font-bold"
                >
                  RISIKO SEDANG-TINGGI
                </span>
                <i class="fas fa-exclamation text-yellow-600 text-2xl"></i>
              </div>

              <h3 class="font-bold text-lg text-slate-800 mb-3">Skenario #6</h3>

              <div class="space-y-2 mb-4">
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-yellow-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">p = TRUE:</span> Hujan
                    Tinggi</span
                  >
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-times-circle text-green-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">q = FALSE:</span> Lahan
                    Normal</span
                  >
                </div>
                <div class="flex items-center gap-2">
                  <i class="fas fa-check-circle text-yellow-600"></i>
                  <span class="text-sm"
                    ><span class="font-semibold">r = TRUE:</span> Sungai
                    Buruk</span
                  >
                </div>
              </div>

              <div class="bg-white rounded-lg p-3 mb-3">
                <p class="text-xs font-semibold text-yellow-700 mb-1">
                  Tingkat Bahaya:
                </p>
                <div class="flex gap-1">
                  <div class="flex-1 h-2 bg-yellow-600 rounded"></div>
                  <div class="flex-1 h-2 bg-yellow-600 rounded"></div>
                  <div class="flex-1 h-2 bg-yellow-600 rounded"></div>
                  <div class="flex-1 h-2 bg-slate-300 rounded"></div>
                  <div class="flex-1 h-2 bg-slate-300 rounded"></div>
                </div>
                <p class="text-xs text-center mt-1 font-bold text-yellow-700">
                  3/5 - SEDANG-TINGGI
                </p>
              </div>

              <div
                class="bg-yellow-100 rounded-lg p-3 border border-yellow-300"
              >
                <p class="text-xs font-semibold text-yellow-800 mb-1">
                  <i class="fas fa-info-circle mr-1"></i>Analisis:
                </p>
                <p class="text-xs text-yellow-900">
                  Lahan masih mampu menyerap air dengan baik, namun kapasitas
                  sungai yang terbatas menjadi bottleneck. Risiko banjir
                  terlokalisir di area dekat sungai dan dataran rendah yang
                  langsung terpengaruh luapan.
                </p>
              </div>
            </div>
          </div>

          <!-- Key Insight -->
          <div
            class="mt-6 bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-6 border-2 border-red-200"
          >
            <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
              <i class="fas fa-key text-red-600"></i>
              Insight Kunci dari Skenario Kritis
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
              <div class="flex items-start gap-2">
                <i class="fas fa-arrow-right text-red-600 mt-1"></i>
                <p class="text-slate-700">
                  <span class="font-semibold">Faktor Dominan:</span> Semua
                  skenario risiko memerlukan curah hujan tinggi (p=TRUE),
                  membuktikan bahwa ini adalah
                  <em>necessary condition</em> untuk banjir.
                </p>
              </div>
              <div class="flex items-start gap-2">
                <i class="fas fa-arrow-right text-red-600 mt-1"></i>
                <p class="text-slate-700">
                  <span class="font-semibold">Efek Kumulatif:</span> Skenario #8
                  paling berbahaya karena efek kumulatif dari semua faktor,
                  mengurangi waktu respons dan meningkatkan volume banjir.
                </p>
              </div>
              <div class="flex items-start gap-2">
                <i class="fas fa-arrow-right text-red-600 mt-1"></i>
                <p class="text-slate-700">
                  <span class="font-semibold">Prioritas Mitigasi:</span>
                  Perbaikan drainase (r) dan pengelolaan lahan (q) dapat
                  mengurangi 3 dari 3 skenario risiko menjadi kondisi aman.
                </p>
              </div>
              <div class="flex items-start gap-2">
                <i class="fas fa-arrow-right text-red-600 mt-1"></i>
                <p class="text-slate-700">
                  <span class="font-semibold">Implikasi Kebijakan:</span>
                  Investasi pada infrastruktur drainase dan konservasi lahan
                  memberikan ROI tertinggi dalam mengurangi risiko banjir.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Validation & Accuracy Section -->
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i class="fas fa-check-double text-green-600"></i>
            Validasi & Akurasi Sistem
          </h2>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Validation Method -->
            <div
              class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border-2 border-blue-200"
            >
              <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                <i class="fas fa-clipboard-check text-blue-600"></i>
                Metode Validasi
              </h3>
              <div class="space-y-3">
                <div class="bg-white rounded-lg p-4 border border-blue-200">
                  <p class="font-semibold text-sm text-blue-900 mb-2">
                    <i class="fas fa-database mr-2"></i>1. Validasi Data
                    Historis
                  </p>
                  <p class="text-xs text-slate-700">
                    Sistem divalidasi menggunakan data kejadian banjir periode
                    2018-2024 dari BNPB dan BPBD. Dari 45 kejadian banjir yang
                    tercatat, sistem berhasil memprediksi 38 kejadian dengan
                    benar.
                  </p>
                </div>

                <div class="bg-white rounded-lg p-4 border border-blue-200">
                  <p class="font-semibold text-sm text-blue-900 mb-2">
                    <i class="fas fa-users mr-2"></i>2. Expert Validation
                  </p>
                  <p class="text-xs text-slate-700">
                    Model logika telah diverifikasi oleh pakar hidrologi dan
                    mitigasi bencana untuk memastikan relevansi variabel dan
                    threshold yang digunakan.
                  </p>
                </div>

                <div class="bg-white rounded-lg p-4 border border-blue-200">
                  <p class="font-semibold text-sm text-blue-900 mb-2">
                    <i class="fas fa-vial mr-2"></i>3. Cross-Validation
                  </p>
                  <p class="text-xs text-slate-700">
                    Dilakukan testing pada berbagai wilayah dengan karakteristik
                    geografis berbeda untuk memastikan generalisasi model.
                  </p>
                </div>
              </div>
            </div>

            <!-- Accuracy Metrics -->
            <div
              class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200"
            >
              <h3 class="font-bold text-slate-800 mb-4 flex items-center gap-2">
                <i class="fas fa-chart-line text-green-600"></i>
                Metrik Akurasi
              </h3>

              <!-- Overall Accuracy -->
              <div class="bg-white rounded-lg p-4 mb-4 border border-green-200">
                <div class="flex items-center justify-between mb-2">
                  <p class="font-semibold text-sm text-green-900">
                    Akurasi Keseluruhan
                  </p>
                  <p class="text-2xl font-bold text-green-600">84.4%</p>
                </div>
                <div class="w-full bg-slate-200 rounded-full h-3">
                  <div
                    class="bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full"
                    style="width: 84.4%"
                  ></div>
                </div>
                <p class="text-xs text-slate-600 mt-2">
                  38 dari 45 kejadian diprediksi dengan benar
                </p>
              </div>

              <!-- Confusion Matrix -->
              <div class="bg-white rounded-lg p-4 mb-4 border border-green-200">
                <p class="font-semibold text-sm text-green-900 mb-3">
                  Confusion Matrix
                </p>
                <div class="grid grid-cols-2 gap-2 text-xs">
                  <div
                    class="bg-green-100 p-3 rounded text-center border border-green-300"
                  >
                    <p class="font-bold text-green-800">True Positive</p>
                    <p class="text-2xl font-bold text-green-600 my-1">32</p>
                    <p class="text-slate-600">Banjir diprediksi benar</p>
                  </div>
                  <div
                    class="bg-red-100 p-3 rounded text-center border border-red-300"
                  >
                    <p class="font-bold text-red-800">False Negative</p>
                    <p class="text-2xl font-bold text-red-600 my-1">5</p>
                    <p class="text-slate-600">Banjir tidak terdeteksi</p>
                  </div>
                  <div
                    class="bg-orange-100 p-3 rounded text-center border border-orange-300"
                  >
                    <p class="font-bold text-orange-800">False Positive</p>
                    <p class="text-2xl font-bold text-orange-600 my-1">2</p>
                    <p class="text-slate-600">False alarm</p>
                  </div>
                  <div
                    class="bg-blue-100 p-3 rounded text-center border border-blue-300"
                  >
                    <p class="font-bold text-blue-800">True Negative</p>
                    <p class="text-2xl font-bold text-blue-600 my-1">6</p>
                    <p class="text-slate-600">Aman diprediksi benar</p>
                  </div>
                </div>
              </div>

              <!-- Additional Metrics -->
              <div class="grid grid-cols-2 gap-3">
                <div
                  class="bg-white rounded-lg p-3 border border-green-200 text-center"
                >
                  <p class="text-xs text-slate-600 mb-1">Precision</p>
                  <p class="text-xl font-bold text-green-600">94.1%</p>
                </div>
                <div
                  class="bg-white rounded-lg p-3 border border-green-200 text-center"
                >
                  <p class="text-xs text-slate-600 mb-1">Recall</p>
                  <p class="text-xl font-bold text-green-600">86.5%</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Limitations & Future Work -->
          <div
            class="mt-6 bg-gradient-to-r from-amber-50 to-yellow-50 rounded-xl p-6 border-2 border-amber-200"
          >
            <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
              <i class="fas fa-exclamation-triangle text-amber-600"></i>
              Keterbatasan & Pengembangan Masa Depan
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <p class="font-semibold text-sm text-amber-900 mb-2">
                  <i class="fas fa-minus-circle mr-2"></i>Keterbatasan Saat Ini
                </p>
                <ul class="space-y-1 text-xs text-slate-700">
                  <li class="flex items-start gap-2">
                    <i
                      class="fas fa-dot-circle text-amber-600 mt-1 text-xs"
                    ></i>
                    <span
                      >Model menggunakan 3 variabel utama; faktor lain seperti
                      topografi dan pasang surut belum diintegrasikan</span
                    >
                  </li>
                  <li class="flex items-start gap-2">
                    <i
                      class="fas fa-dot-circle text-amber-600 mt-1 text-xs"
                    ></i>
                    <span
                      >Threshold bersifat statis; belum adaptif terhadap
                      perubahan iklim jangka panjang</span
                    >
                  </li>
                  <li class="flex items-start gap-2">
                    <i
                      class="fas fa-dot-circle text-amber-600 mt-1 text-xs"
                    ></i>
                    <span
                      >Validasi terbatas pada data historis 7 tahun; perlu data
                      lebih panjang untuk robustness</span
                    >
                  </li>
                </ul>
              </div>
              <div>
                <p class="font-semibold text-sm text-amber-900 mb-2">
                  <i class="fas fa-rocket mr-2"></i>Rencana Pengembangan
                </p>
                <ul class="space-y-1 text-xs text-slate-700">
                  <li class="flex items-start gap-2">
                    <i
                      class="fas fa-check-circle text-green-600 mt-1 text-xs"
                    ></i>
                    <span
                      >Integrasi machine learning untuk adaptive threshold
                      berbasis data real-time</span
                    >
                  </li>
                  <li class="flex items-start gap-2">
                    <i
                      class="fas fa-check-circle text-green-600 mt-1 text-xs"
                    ></i>
                    <span
                      >Penambahan variabel: topografi, pasang surut, soil
                      moisture, dan land use change rate</span
                    >
                  </li>
                  <li class="flex items-start gap-2">
                    <i
                      class="fas fa-check-circle text-green-600 mt-1 text-xs"
                    ></i>
                    <span
                      >Implementasi fuzzy logic untuk menangani ketidakpastian
                      dan nilai kontinyu</span
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Academic References Section -->
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i class="fas fa-book text-indigo-600"></i>
            Referensi & Sumber Data
          </h2>

          <div
            class="bg-gradient-to-br from-slate-50 to-blue-50 rounded-xl p-6 border-2 border-slate-200"
          >
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Data Sources -->
              <div>
                <h3
                  class="font-bold text-slate-800 mb-4 flex items-center gap-2"
                >
                  <i class="fas fa-database text-blue-600"></i>
                  Sumber Data
                </h3>
                <div class="space-y-3">
                  <div class="bg-white rounded-lg p-4 border border-blue-200">
                    <p class="font-semibold text-sm text-blue-900 mb-1">
                      <i class="fas fa-cloud-sun mr-2"></i>BMKG (Badan
                      Meteorologi, Klimatologi, dan Geofisika)
                    </p>
                    <p class="text-xs text-slate-600 mb-2">
                      Data curah hujan historis 2018-2024
                    </p>
                    <a
                      href="https://www.bmkg.go.id"
                      target="_blank"
                      class="text-xs text-blue-600 hover:underline"
                    >
                      www.bmkg.go.id
                    </a>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-blue-200">
                    <p class="font-semibold text-sm text-blue-900 mb-1">
                      <i class="fas fa-exclamation-triangle mr-2"></i>BNPB
                      (Badan Nasional Penanggulangan Bencana)
                    </p>
                    <p class="text-xs text-slate-600 mb-2">
                      Database kejadian bencana banjir dan dampaknya
                    </p>
                    <a
                      href="https://www.bnpb.go.id"
                      target="_blank"
                      class="text-xs text-blue-600 hover:underline"
                    >
                      www.bnpb.go.id
                    </a>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-blue-200">
                    <p class="font-semibold text-sm text-blue-900 mb-1">
                      <i class="fas fa-map-marked-alt mr-2"></i>BPBD (Badan
                      Penanggulangan Bencana Daerah)
                    </p>
                    <p class="text-xs text-slate-600 mb-2">
                      Data lokal bencana dan kondisi infrastruktur drainase
                    </p>
                    <a
                      href="https://bnpb.go.id"
                      target="_blank"
                      class="text-xs text-blue-600 hover:underline"
                    >
                      bnpb.go.id
                    </a>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-blue-200">
                    <p class="font-semibold text-sm text-blue-900 mb-1">
                      <i class="fas fa-satellite mr-2"></i>Kementerian
                      Lingkungan Hidup dan Kehutanan
                    </p>
                    <p class="text-xs text-slate-600 mb-2">
                      Data deforestasi dan perubahan tutupan lahan
                    </p>
                    <a
                      href="https://www.menlhk.go.id"
                      target="_blank"
                      class="text-xs text-blue-600 hover:underline"
                    >
                      www.menlhk.go.id
                    </a>
                  </div>
                </div>
              </div>

              <!-- Academic References -->
              <div>
                <h3
                  class="font-bold text-slate-800 mb-4 flex items-center gap-2"
                >
                  <i class="fas fa-graduation-cap text-purple-600"></i>
                  Referensi Akademis
                </h3>
                <div class="space-y-3">
                  <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <p class="text-xs text-slate-700 mb-2">
                      <span class="font-semibold text-purple-900">[1]</span>
                      Rosen, K. H. (2019).
                      <em>Discrete Mathematics and Its Applications</em> (8th
                      ed.). McGraw-Hill Education.
                    </p>
                    <p class="text-xs text-slate-600 italic">
                      Dasar teori logika proposisional dan tabel kebenaran
                    </p>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <p class="text-xs text-slate-700 mb-2">
                      <span class="font-semibold text-purple-900">[2]</span>
                      Suhelmi, I. R., et al. (2020). "Analisis Risiko Banjir
                      Menggunakan Metode Overlay dan Scoring".
                      <em>Jurnal Geografi</em>, 12(2), 145-158.
                    </p>
                    <p class="text-xs text-slate-600 italic">
                      Studi kasus banjir di Indonesia
                    </p>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <p class="text-xs text-slate-700 mb-2">
                      <span class="font-semibold text-purple-900">[3]</span>
                      Marfai, M. A., & King, L. (2008). "Potential vulnerability
                      implications of coastal inundation due to sea level rise
                      for the coastal zone of Semarang city, Indonesia".
                      <em>Environmental Geology</em>, 54(6), 1235-1245.
                    </p>
                    <p class="text-xs text-slate-600 italic">
                      Metodologi penilaian risiko banjir
                    </p>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <p class="text-xs text-slate-700 mb-2">
                      <span class="font-semibold text-purple-900">[4]</span>
                      Syahputra, R. (2021). "Dampak Alih Fungsi Lahan terhadap
                      Debit Puncak Banjir di Daerah Aliran Sungai".
                      <em>Jurnal Teknik Sipil</em>, 5(1), 23-34.
                    </p>
                    <p class="text-xs text-slate-600 italic">
                      Pengaruh deforestasi terhadap banjir
                    </p>
                  </div>

                  <div class="bg-white rounded-lg p-4 border border-purple-200">
                    <p class="text-xs text-slate-700 mb-2">
                      <span class="font-semibold text-purple-900">[5]</span>
                      Turban, E., et al. (2019).
                      <em
                        >Decision Support and Business Intelligence Systems</em
                      >
                      (10th ed.). Pearson.
                    </p>
                    <p class="text-xs text-slate-600 italic">
                      Teori sistem pakar dan decision support systems
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Citation Note -->
            <div
              class="mt-6 bg-indigo-100 rounded-lg p-4 border border-indigo-300"
            >
              <p class="text-xs text-indigo-900">
                <i class="fas fa-quote-left mr-2"></i>
                <span class="font-semibold">Catatan Sitasi:</span> Sistem ini
                dikembangkan sebagai proyek akademis untuk mata kuliah Logika
                Matematika. Semua data dan referensi digunakan untuk tujuan
                pendidikan dan penelitian. Untuk implementasi operasional,
                diperlukan verifikasi lebih lanjut dengan stakeholder terkait.
              </p>
            </div>
          </div>
        </div>

        <!-- SECTION 4: PENJELASAN DETAIL (After Truth Table) -->
      </div>

      <!-- Statistics Tab -->
      <div id="content-statistics" class="tab-content hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <!-- Risk Trend Chart -->
          <div class="bg-white rounded-2xl shadow-xl p-8">
            <h2
              class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
            >
              <i class="fas fa-chart-line text-blue-600"></i>
              Tren Risiko Banjir
            </h2>
            <canvas id="riskTrendChart"></canvas>
          </div>

          <!-- Variable Distribution -->
          <div class="bg-white rounded-2xl shadow-xl p-8">
            <h2
              class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
            >
              <i class="fas fa-chart-pie text-purple-600"></i>
              Distribusi Variabel
            </h2>
            <canvas id="variableDistChart"></canvas>
          </div>
        </div>

        <!-- Statistics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div
            class="bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl shadow-xl p-6 text-white"
          >
            <div class="flex items-center justify-between">
              <div>
                <p class="text-blue-100 text-sm font-semibold">
                  Total Analisis
                </p>
                <p id="stat-total" class="text-4xl font-bold mt-2">0</p>
              </div>
              <i class="fas fa-calculator text-5xl opacity-30"></i>
            </div>
          </div>

          <div
            class="bg-gradient-to-br from-red-500 to-red-700 rounded-2xl shadow-xl p-6 text-white"
          >
            <div class="flex items-center justify-between">
              <div>
                <p class="text-red-100 text-sm font-semibold">Deteksi Banjir</p>
                <p id="stat-flood" class="text-4xl font-bold mt-2">0</p>
              </div>
              <i class="fas fa-exclamation-triangle text-5xl opacity-30"></i>
            </div>
          </div>

          <div
            class="bg-gradient-to-br from-green-500 to-green-700 rounded-2xl shadow-xl p-6 text-white"
          >
            <div class="flex items-center justify-between">
              <div>
                <p class="text-green-100 text-sm font-semibold">Kondisi Aman</p>
                <p id="stat-safe" class="text-4xl font-bold mt-2">0</p>
              </div>
              <i class="fas fa-shield-alt text-5xl opacity-30"></i>
            </div>
          </div>

          <div
            class="bg-gradient-to-br from-orange-500 to-orange-700 rounded-2xl shadow-xl p-6 text-white"
          >
            <div class="flex items-center justify-between">
              <div>
                <p class="text-orange-100 text-sm font-semibold">
                  Tingkat Risiko
                </p>
                <p id="stat-risk-rate" class="text-4xl font-bold mt-2">0%</p>
              </div>
              <i class="fas fa-percentage text-5xl opacity-30"></i>
            </div>
          </div>
        </div>

        <!-- History Table -->
        <div class="bg-white rounded-2xl shadow-xl p-8">
          <div class="flex items-center justify-between mb-6">
            <h2
              class="text-2xl font-bold text-slate-800 flex items-center gap-3"
            >
              <i class="fas fa-history text-purple-600"></i>
              Riwayat Analisis Detail
            </h2>
            <button
              onclick="clearHistory()"
              class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-semibold"
            >
              <i class="fas fa-trash mr-2"></i>
              Hapus Riwayat
            </button>
          </div>

          <div id="history-table-container">
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Simulation Tab -->
      <div id="content-simulation" class="tab-content hidden">
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i class="fas fa-flask text-green-600"></i>
            Mode Simulasi Interaktif
          </h2>

          <p class="text-slate-600 mb-6">
            Coba berbagai kombinasi variabel untuk memahami bagaimana logika
            proposisional bekerja dalam memprediksi risiko banjir.
          </p>

          <!-- Simulation Scenarios -->
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"
          >
            <button
              onclick="runSimulation(false, false, false)"
              class="p-6 bg-green-50 hover:bg-green-100 border-2 border-green-200 rounded-xl text-left transition-all"
            >
              <i class="fas fa-sun text-3xl text-green-600 mb-3"></i>
              <h3 class="font-bold text-slate-800 mb-2">Kondisi Ideal</h3>
              <p class="text-sm text-slate-600">
                Tidak ada hujan, hutan terjaga, sungai baik
              </p>
            </button>

            <button
              onclick="runSimulation(true, false, false)"
              class="p-6 bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 rounded-xl text-left transition-all"
            >
              <i class="fas fa-umbrella text-3xl text-blue-600 mb-3"></i>
              <h3 class="font-bold text-slate-800 mb-2">Hujan Saja</h3>
              <p class="text-sm text-slate-600">
                Hujan deras, tapi lingkungan baik
              </p>
            </button>

            <button
              onclick="runSimulation(true, true, false)"
              class="p-6 bg-orange-50 hover:bg-orange-100 border-2 border-orange-200 rounded-xl text-left transition-all"
            >
              <i class="fas fa-mountain text-3xl text-orange-600 mb-3"></i>
              <h3 class="font-bold text-slate-800 mb-2">Hujan + Lahan Rusak</h3>
              <p class="text-sm text-slate-600">
                Kombinasi berbahaya: run-off tinggi
              </p>
            </button>

            <button
              onclick="runSimulation(true, true, true)"
              class="p-6 bg-red-50 hover:bg-red-100 border-2 border-red-200 rounded-xl text-left transition-all"
            >
              <i
                class="fas fa-exclamation-triangle text-3xl text-red-600 mb-3"
              ></i>
              <h3 class="font-bold text-slate-800 mb-2">Kondisi Kritis</h3>
              <p class="text-sm text-slate-600">Semua faktor negatif aktif</p>
            </button>
          </div>

          <!-- Simulation Result -->
          <div
            id="simulation-result"
            class="bg-slate-50 rounded-xl p-8 border-2 border-slate-200"
          >
            <div class="text-center text-slate-400">
              <i class="fas fa-hand-pointer text-6xl mb-4"></i>
              <p class="text-lg">
                Pilih skenario di atas untuk memulai simulasi
              </p>
            </div>
          </div>
        </div>

        <!-- All Scenarios Comparison -->
        <div class="bg-white rounded-2xl shadow-xl p-8">
          <h2
            class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
          >
            <i class="fas fa-th text-indigo-600"></i>
            Perbandingan Semua Skenario
          </h2>

          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"
            id="all-scenarios"
          >
            <!-- Will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Weather Tab -->
      <div id="content-weather" class="tab-content hidden">
        <!-- Weather Header with Search -->
        <div
          class="bg-gradient-to-br from-indigo-600 via-purple-600 to-blue-600 rounded-2xl shadow-2xl p-6 mb-6 text-white relative overflow-hidden"
        >
          <!-- Decorative elements -->
          <div
            class="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full -mr-32 -mt-32"
          ></div>
          <div
            class="absolute bottom-0 left-0 w-48 h-48 bg-white/5 rounded-full -ml-24 -mb-24"
          ></div>

          <div class="relative z-10">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h2 class="text-3xl font-bold flex items-center gap-3">
                  <i class="fas fa-cloud-sun"></i>
                  Informasi Cuaca
                </h2>
                <p class="text-purple-100 mt-2">
                  Pantau kondisi cuaca untuk antisipasi banjir
                </p>
              </div>
              <div class="text-right">
                <!-- Real-time Clock -->
                <div
                  class="bg-white/20 backdrop-blur-sm rounded-xl px-6 py-3 mb-3 border border-white/30"
                >
                  <div class="flex items-center gap-3">
                    <i class="fas fa-clock text-2xl"></i>
                    <div>
                      <p class="text-sm text-purple-100 font-medium">
                        Waktu Sekarang (WIB)
                      </p>
                      <p
                        class="text-2xl font-bold tabular-nums"
                        id="current-time"
                      >
                        --:--:--
                      </p>
                      <p class="text-xs text-purple-200" id="current-date">
                        Loading...
                      </p>
                    </div>
                  </div>
                </div>
                <button
                  onclick="refreshWeather()"
                  class="w-full bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg backdrop-blur-sm transition-all border border-white/30"
                >
                  <i class="fas fa-sync-alt mr-2"></i>
                  Refresh
                </button>
              </div>
            </div>

            <!-- City Search -->
            <div class="flex gap-3">
              <div class="flex-1 relative">
                <input
                  type="text"
                  id="city-search"
                  placeholder="Cari lokasi"
                  class="w-full px-5 py-3 rounded-xl text-slate-800 focus:outline-none focus:ring-2 focus:ring-white/50 shadow-lg"
                  onkeypress="if(event.key==='Enter') searchCity()"
                />
                <div
                  id="city-suggestions"
                  class="absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl max-h-60 overflow-y-auto hidden z-10"
                ></div>
              </div>
              <button
                onclick="searchCity()"
                class="bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-purple-50 transition-all shadow-lg"
              >
                <i class="fas fa-search mr-2"></i>
                Cari
              </button>
              <button
                onclick="useCurrentLocation()"
                class="bg-white/20 hover:bg-white/30 px-4 py-3 rounded-xl backdrop-blur-sm transition-all border border-white/30"
                title="Gunakan lokasi saat ini"
              >
                <i class="fas fa-location-arrow"></i>
              </button>
            </div>

            <!-- Quick City Buttons -->
            <div class="flex flex-wrap gap-2 mt-4">
              <span class="text-purple-100 text-sm mr-2">Kota Populer:</span>
              <button
                onclick="quickSearchCity('Jakarta')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Jakarta
              </button>
              <button
                onclick="quickSearchCity('Bandung')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Bandung
              </button>
              <button
                onclick="quickSearchCity('Tasikmalaya')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Tasikmalaya
              </button>
              <button
                onclick="quickSearchCity('Surabaya')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Surabaya
              </button>
              <button
                onclick="quickSearchCity('Medan')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Medan
              </button>
              <button
                onclick="quickSearchCity('Yogyakarta')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Yogyakarta
              </button>
              <button
                onclick="quickSearchCity('Bali')"
                class="bg-white/15 hover:bg-white/25 px-4 py-1.5 rounded-full text-sm backdrop-blur-sm transition-all border border-white/20"
              >
                Bali
              </button>
            </div>
          </div>
        </div>

        <!-- Weather Loading State -->
        <div id="weather-loading" class="flex justify-center py-12">
          <div class="text-center">
            <div class="spinner mx-auto mb-4"></div>
            <p class="text-slate-600">Memuat data cuaca...</p>
          </div>
        </div>

        <!-- Weather Error State -->
        <div
          id="weather-error"
          class="hidden bg-red-50 border-2 border-red-200 rounded-2xl p-8 text-center"
        >
          <i class="fas fa-exclamation-circle text-red-500 text-5xl mb-4"></i>
          <h3 class="text-xl font-bold text-red-800 mb-2">
            Gagal Memuat Data Cuaca
          </h3>
          <p class="text-red-600 mb-4" id="weather-error-message"></p>
          <button
            onclick="refreshWeather()"
            class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold"
          >
            <i class="fas fa-redo mr-2"></i>
            Coba Lagi
          </button>
        </div>

        <!-- Weather Content -->
        <div id="weather-content" class="hidden">
          <!-- Current Weather Card - MSN Style with Animations -->
          <div
            class="bg-gradient-to-br from-indigo-500 via-purple-500 to-blue-500 rounded-3xl shadow-2xl overflow-hidden mb-6 relative weather-container"
          >
            <!-- Decorative background -->
            <div
              class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"
            ></div>

            <!-- Weather Animation Container -->
            <div id="weather-animation-container"></div>

            <div class="relative z-10 p-8">
              <!-- Location & Time -->
              <div class="mb-8">
                <div class="flex items-center gap-2 mb-2">
                  <i class="fas fa-map-marker-alt text-white/80 text-xl"></i>
                  <h3
                    class="text-3xl font-bold text-white"
                    id="weather-location"
                  >
                    Loading...
                  </h3>
                </div>
                <p class="text-purple-100" id="weather-timestamp">
                  Diperbarui: Loading...
                </p>
              </div>

              <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Main Temperature Display -->
                <div class="lg:col-span-1">
                  <div class="flex items-start gap-4 mb-4">
                    <img
                      id="weather-icon"
                      src=""
                      alt=""
                      class="w-32 h-32 drop-shadow-lg"
                    />
                    <div>
                      <div class="flex items-baseline">
                        <span
                          id="weather-temp"
                          class="text-7xl font-bold text-white"
                          >--</span
                        >
                        <span class="text-4xl text-white/90 ml-2">Â°C</span>
                      </div>
                    </div>
                  </div>
                  <p
                    id="weather-description"
                    class="text-2xl text-white font-medium mb-3"
                  >
                    Loading...
                  </p>
                  <p class="text-purple-100 text-lg">
                    Terasa seperti
                    <span
                      id="weather-feels-like"
                      class="font-semibold text-white"
                      >--</span
                    >Â°C
                  </p>
                  <p class="text-purple-100 text-sm mt-2">
                    Min:
                    <span id="weather-temp-min" class="font-semibold">--</span
                    >Â°C â€¢ Max:
                    <span id="weather-temp-max" class="font-semibold">--</span
                    >Â°C
                  </p>
                </div>

                <!-- Weather Details Grid -->
                <div class="lg:col-span-2">
                  <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                    <!-- Kelembaban -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-blue-400/30 p-2 rounded-lg">
                          <i class="fas fa-tint text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Kelembaban</span
                        >
                      </div>
                      <p class="text-3xl font-bold text-white">
                        <span id="weather-humidity">--</span>%
                      </p>
                    </div>

                    <!-- Angin -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-cyan-400/30 p-2 rounded-lg">
                          <i class="fas fa-wind text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Angin</span
                        >
                      </div>
                      <p class="text-3xl font-bold text-white">
                        <span id="weather-wind">--</span>
                        <span class="text-lg">km/h</span>
                      </p>
                    </div>

                    <!-- Curah Hujan -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-blue-500/30 p-2 rounded-lg">
                          <i class="fas fa-cloud-rain text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Curah Hujan</span
                        >
                      </div>
                      <p class="text-3xl font-bold text-white">
                        <span id="weather-rain">0.0</span>
                        <span class="text-lg">mm</span>
                      </p>
                    </div>

                    <!-- Jarak Pandang -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-indigo-400/30 p-2 rounded-lg">
                          <i class="fas fa-eye text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Jarak Pandang</span
                        >
                      </div>
                      <p class="text-3xl font-bold text-white">
                        <span id="weather-visibility">--</span>
                        <span class="text-lg">km</span>
                      </p>
                    </div>

                    <!-- Matahari Terbit -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-yellow-400/30 p-2 rounded-lg">
                          <i class="fas fa-sunrise text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Matahari Terbit</span
                        >
                      </div>
                      <p
                        class="text-3xl font-bold text-white"
                        id="weather-sunrise"
                      >
                        --:--
                      </p>
                    </div>

                    <!-- Matahari Terbenam -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-orange-400/30 p-2 rounded-lg">
                          <i class="fas fa-sunset text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Matahari Terbenam</span
                        >
                      </div>
                      <p
                        class="text-3xl font-bold text-white"
                        id="weather-sunset"
                      >
                        --:--
                      </p>
                    </div>

                    <!-- Tekanan Udara -->
                    <div
                      class="bg-white/15 backdrop-blur-md rounded-2xl p-5 border border-white/20 hover:bg-white/20 transition-all md:col-span-3"
                    >
                      <div class="flex items-center gap-3 mb-3">
                        <div class="bg-purple-400/30 p-2 rounded-lg">
                          <i class="fas fa-compress-alt text-white text-xl"></i>
                        </div>
                        <span class="text-sm text-purple-100 font-medium"
                          >Tekanan Udara</span
                        >
                      </div>
                      <p class="text-3xl font-bold text-white">
                        <span id="weather-pressure">--</span>
                        <span class="text-lg">hPa</span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Flood Risk Alert -->
          <div
            id="flood-risk-alert"
            class="rounded-2xl shadow-xl p-6 mb-8 hidden"
          >
            <div class="flex items-start gap-4">
              <i id="flood-risk-icon" class="text-4xl"></i>
              <div class="flex-1">
                <h3 id="flood-risk-title" class="text-xl font-bold mb-2"></h3>
                <p id="flood-risk-message" class="text-sm"></p>
              </div>
            </div>
          </div>

          <!-- Hourly Forecast with Chart -->
          <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <h3
              class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
            >
              <i class="fas fa-clock text-blue-600"></i>
              Prakiraan Per Jam
            </h3>

            <div id="hourly-forecast-container">
              <!-- Hourly forecast will be inserted here -->
            </div>
          </div>

          <!-- 5-Day Forecast with Animation -->
          <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <h3
              class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
            >
              <i class="fas fa-calendar-week text-indigo-600"></i>
              Prakiraan 5 Hari
            </h3>

            <!-- Temperature Trend Chart -->
            <div class="mb-6">
              <canvas
                id="forecast-temp-chart"
                style="max-height: 250px"
              ></canvas>
            </div>

            <div
              id="weather-forecast"
              class="grid grid-cols-2 md:grid-cols-5 gap-4"
            >
              <!-- Forecast cards will be inserted here -->
            </div>
          </div>

          <!-- Weather Tips for Flood Prevention -->
          <div
            class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl shadow-xl p-8"
          >
            <h3
              class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-3"
            >
              <i class="fas fa-lightbulb text-yellow-500"></i>
              Tips Berdasarkan Kondisi Cuaca
            </h3>

            <div
              class="grid grid-cols-1 md:grid-cols-2 gap-6"
              id="weather-tips"
            >
              <!-- Tips will be dynamically generated -->
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Education Modal -->
    <div
      id="education-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center modal-backdrop"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto"
      >
        <div
          class="sticky top-0 bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 rounded-t-2xl"
        >
          <div class="flex items-center justify-between">
            <h2 class="text-2xl font-bold flex items-center gap-3">
              <i class="fas fa-graduation-cap"></i>
              Panduan Edukasi Logika Proposisional
            </h2>
            <button
              onclick="closeEducationModal()"
              class="text-white hover:text-gray-200"
            >
              <i class="fas fa-times text-2xl"></i>
            </button>
          </div>
        </div>

        <div class="p-8 space-y-6">
          <!-- Logic Symbols -->
          <div>
            <h3
              class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"
            >
              <i class="fas fa-book text-blue-600"></i>
              Simbol Logika Matematika
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-200">
                <div class="flex items-center gap-3 mb-2">
                  <span class="text-3xl font-bold text-blue-600">âˆ§</span>
                  <div>
                    <h4 class="font-bold text-slate-800">AND (Konjungsi)</h4>
                    <p class="text-sm text-slate-600">
                      Kedua kondisi harus TRUE
                    </p>
                  </div>
                </div>
                <div class="bg-white p-3 rounded mt-3">
                  <p class="text-sm font-mono">TRUE âˆ§ TRUE = TRUE</p>
                  <p class="text-sm font-mono">TRUE âˆ§ FALSE = FALSE</p>
                  <p class="text-sm font-mono">FALSE âˆ§ FALSE = FALSE</p>
                </div>
              </div>

              <div class="bg-green-50 p-4 rounded-lg border-2 border-green-200">
                <div class="flex items-center gap-3 mb-2">
                  <span class="text-3xl font-bold text-green-600">âˆ¨</span>
                  <div>
                    <h4 class="font-bold text-slate-800">OR (Disjungsi)</h4>
                    <p class="text-sm text-slate-600">
                      Minimal satu kondisi TRUE
                    </p>
                  </div>
                </div>
                <div class="bg-white p-3 rounded mt-3">
                  <p class="text-sm font-mono">TRUE âˆ¨ TRUE = TRUE</p>
                  <p class="text-sm font-mono">TRUE âˆ¨ FALSE = TRUE</p>
                  <p class="text-sm font-mono">FALSE âˆ¨ FALSE = FALSE</p>
                </div>
              </div>
            </div>
          </div>

          <!-- How It Works -->
          <div>
            <h3
              class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"
            >
              <i class="fas fa-cogs text-orange-600"></i>
              Cara Kerja Sistem
            </h3>

            <div
              class="bg-gradient-to-r from-orange-50 to-yellow-50 p-6 rounded-lg border-2 border-orange-200"
            >
              <div class="space-y-4">
                <div class="flex items-start gap-3">
                  <div
                    class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0"
                  >
                    1
                  </div>
                  <div>
                    <h4 class="font-bold text-slate-800">Input Variabel</h4>
                    <p class="text-sm text-slate-600">
                      p (Hujan), q (Lahan), r (Sungai) - TRUE atau FALSE
                    </p>
                  </div>
                </div>

                <div class="flex items-start gap-3">
                  <div
                    class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0"
                  >
                    2
                  </div>
                  <div>
                    <h4 class="font-bold text-slate-800">Evaluasi q âˆ¨ r</h4>
                    <p class="text-sm text-slate-600">
                      Cek apakah Lahan ATAU Sungai bermasalah
                    </p>
                  </div>
                </div>

                <div class="flex items-start gap-3">
                  <div
                    class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0"
                  >
                    3
                  </div>
                  <div>
                    <h4 class="font-bold text-slate-800">
                      Evaluasi p âˆ§ (q âˆ¨ r)
                    </h4>
                    <p class="text-sm text-slate-600">
                      Cek apakah ada Hujan DAN (Lahan/Sungai bermasalah)
                    </p>
                  </div>
                </div>

                <div class="flex items-start gap-3">
                  <div
                    class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold flex-shrink-0"
                  >
                    4
                  </div>
                  <div>
                    <h4 class="font-bold text-slate-800">
                      Hasil & Rekomendasi
                    </h4>
                    <p class="text-sm text-slate-600">
                      TRUE = Banjir terdeteksi | FALSE = Kondisi aman
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Example -->
          <div>
            <h3
              class="text-xl font-bold text-slate-800 mb-4 flex items-center gap-2"
            >
              <i class="fas fa-lightbulb text-yellow-600"></i>
              Contoh Kasus
            </h3>

            <div class="bg-yellow-50 p-6 rounded-lg border-2 border-yellow-200">
              <h4 class="font-bold text-slate-800 mb-3">
                Skenario: Hujan Deras + Lahan Rusak
              </h4>
              <div class="space-y-2 text-sm">
                <p><strong>Input:</strong> p = TRUE, q = TRUE, r = FALSE</p>
                <p><strong>Langkah 1:</strong> q âˆ¨ r = TRUE âˆ¨ FALSE = TRUE</p>
                <p>
                  <strong>Langkah 2:</strong> p âˆ§ (q âˆ¨ r) = TRUE âˆ§ TRUE = TRUE
                </p>
                <p class="text-red-600 font-bold">
                  <strong>Hasil:</strong> BANJIR TERDETEKSI âš ï¸
                </p>
                <p class="mt-3 text-slate-700">
                  <strong>Penjelasan:</strong> Hujan deras (p=TRUE)
                  dikombinasikan dengan lahan yang rusak (q=TRUE) menyebabkan
                  run-off tinggi dan risiko banjir, meskipun sungai dalam
                  kondisi baik (r=FALSE).
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Checklist Modal -->
    <div
      id="checklist-modal"
      class="fixed inset-0 z-50 hidden items-center justify-center modal-backdrop"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"
      >
        <div
          class="sticky top-0 bg-gradient-to-r from-green-600 to-teal-600 text-white p-6 rounded-t-2xl"
        >
          <div class="flex items-center justify-between">
            <h2 class="text-2xl font-bold flex items-center gap-3">
              <i class="fas fa-clipboard-check"></i>
              Checklist Kesiapsiagaan Bencana
            </h2>
            <button
              onclick="closeChecklistModal()"
              class="text-white hover:text-gray-200"
            >
              <i class="fas fa-times text-2xl"></i>
            </button>
          </div>
        </div>

        <div class="p-8">
          <p class="text-slate-600 mb-6">
            Pastikan Anda sudah menyiapkan hal-hal berikut untuk menghadapi
            potensi banjir:
          </p>

          <!-- Emergency Kit -->
          <div class="mb-6">
            <h3
              class="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2"
            >
              <i class="fas fa-medkit text-red-600"></i>
              Perlengkapan Darurat
            </h3>
            <div class="space-y-2">
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Kotak P3K lengkap dengan obat-obatan dasar</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700">Senter dan baterai cadangan</span>
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Radio portable untuk informasi darurat</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Makanan kaleng dan air minum (minimal 3 hari)</span
                >
              </label>
            </div>
          </div>

          <!-- Documents -->
          <div class="mb-6">
            <h3
              class="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2"
            >
              <i class="fas fa-file-alt text-blue-600"></i>
              Dokumen Penting
            </h3>
            <div class="space-y-2">
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Fotokopi KTP, KK, dan dokumen identitas</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Sertifikat tanah/rumah dalam plastik kedap air</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Nomor kontak darurat (keluarga, BPBD, PMI)</span
                >
              </label>
            </div>
          </div>

          <!-- Evacuation -->
          <div class="mb-6">
            <h3
              class="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2"
            >
              <i class="fas fa-route text-orange-600"></i>
              Rencana Evakuasi
            </h3>
            <div class="space-y-2">
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Mengetahui lokasi posko pengungsian terdekat</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Menyiapkan tas siaga yang mudah dibawa</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Menginformasikan rencana ke seluruh anggota keluarga</span
                >
              </label>
            </div>
          </div>

          <!-- Property Protection -->
          <div>
            <h3
              class="font-bold text-lg text-slate-800 mb-3 flex items-center gap-2"
            >
              <i class="fas fa-home text-green-600"></i>
              Perlindungan Properti
            </h3>
            <div class="space-y-2">
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Memindahkan barang berharga ke tempat tinggi</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Mematikan listrik dan gas jika diperlukan</span
                >
              </label>
              <label
                class="checklist-item flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 cursor-pointer"
              >
                <input type="checkbox" class="w-5 h-5 text-blue-600 rounded" />
                <span class="text-slate-700"
                  >Menutup pintu dan jendela dengan rapat</span
                >
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="mt-12 pb-8">
      <div class="text-center text-slate-600">
        <p class="text-sm mb-2">
          <i class="fas fa-graduation-cap mr-2"></i>
          Implementasi Logika Proposisional untuk Mitigasi Bencana Alam
        </p>
        <p class="text-xs text-slate-500">
          Â© 2025 - Sistem Pakar Mitigasi Bencana
        </p>
        <p class="text-xs mt-1 text-blue-600 font-semibold">
          <i class="fab fa-python mr-1"></i>
          Powered by Flask Python Backend
        </p>
      </div>
    </footer>

    <script>
      // ============================================
      // API CONFIGURATION
      // ============================================

      const API_BASE_URL = window.location.origin;

      // ============================================
      // GLOBAL STATE
      // ============================================

      let analysisHistory = [];
      let riskTrendChart = null;
      let variableDistChart = null;

      // ============================================
      // TAB MANAGEMENT
      // ============================================

      function switchTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll(".tab-content").forEach((content) => {
          content.classList.add("hidden");
        });

        // Remove active class from all tab buttons
        document.querySelectorAll(".tab-button").forEach((button) => {
          button.classList.remove("active");
        });

        // Show selected tab content
        document
          .getElementById(`content-${tabName}`)
          .classList.remove("hidden");

        // Add active class to selected tab button
        document.getElementById(`tab-${tabName}`).classList.add("active");

        // Update charts if statistics tab
        if (tabName === "statistics") {
          updateStatistics();
        }

        // Load weather if weather tab
        if (tabName === "weather") {
          loadWeather();
        }

        // Load all scenarios if simulation tab
        if (tabName === "simulation") {
          loadAllScenarios();
        }
      }

      // ============================================
      // API CALLS
      // ============================================

      async function calculateRiskAPI(p, q, r) {
        try {
          const response = await fetch(`${API_BASE_URL}/api/calculate-flood`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ p, q, r }),
          });

          if (!response.ok) {
            throw new Error("API request failed");
          }

          return await response.json();
        } catch (error) {
          console.error("Error calling API:", error);
          return null;
        }
      }

      async function getTruthTableAPI() {
        try {
          const response = await fetch(`${API_BASE_URL}/api/truth-table/flood`);

          if (!response.ok) {
            throw new Error("API request failed");
          }

          return await response.json();
        } catch (error) {
          console.error("Error calling API:", error);
          return null;
        }
      }

      async function getWeatherAPI(city = null, lat = null, lon = null) {
        try {
          let url = `${API_BASE_URL}/api/weather`;
          const params = new URLSearchParams();

          if (city) params.append("city", city);
          if (lat) params.append("lat", lat);
          if (lon) params.append("lon", lon);

          if (params.toString()) {
            url += "?" + params.toString();
          }

          const response = await fetch(url);

          if (!response.ok) {
            throw new Error("API request failed");
          }

          return await response.json();
        } catch (error) {
          console.error("Weather API Error:", error);
          throw error;
        }
      }

      // Popular Indonesian cities with coordinates (for instant access)
      const popularIndonesianCities = {
        jakarta: {
          name: "Jakarta",
          lat: -6.2088,
          lon: 106.8456,
          country: "ID",
          state: "DKI Jakarta",
        },
        bandung: {
          name: "Bandung",
          lat: -6.9175,
          lon: 107.6191,
          country: "ID",
          state: "Jawa Barat",
        },
        surabaya: {
          name: "Surabaya",
          lat: -7.2575,
          lon: 112.7521,
          country: "ID",
          state: "Jawa Timur",
        },
        medan: {
          name: "Medan",
          lat: 3.5952,
          lon: 98.6722,
          country: "ID",
          state: "Sumatra Utara",
        },
        yogyakarta: {
          name: "Yogyakarta",
          lat: -7.7956,
          lon: 110.3695,
          country: "ID",
          state: "DI Yogyakarta",
        },
        bali: {
          name: "Denpasar",
          lat: -8.6705,
          lon: 115.2126,
          country: "ID",
          state: "Bali",
        },
        semarang: {
          name: "Semarang",
          lat: -6.9667,
          lon: 110.4167,
          country: "ID",
          state: "Jawa Tengah",
        },
        makassar: {
          name: "Makassar",
          lat: -5.1477,
          lon: 119.4327,
          country: "ID",
          state: "Sulawesi Selatan",
        },
        palembang: {
          name: "Palembang",
          lat: -2.9761,
          lon: 104.7754,
          country: "ID",
          state: "Sumatra Selatan",
        },
        "banda aceh": {
          name: "Banda Aceh",
          lat: 5.5483,
          lon: 95.3238,
          country: "ID",
          state: "Aceh",
        },
        tasikmalaya: {
          name: "Tasikmalaya",
          lat: -7.3267,
          lon: 108.2211,
          country: "ID",
          state: "Jawa Barat",
        },
        denpasar: {
          name: "Denpasar",
          lat: -8.6705,
          lon: 115.2126,
          country: "ID",
          state: "Bali",
        },
        balikpapan: {
          name: "Balikpapan",
          lat: -1.2379,
          lon: 116.8529,
          country: "ID",
          state: "Kalimantan Timur",
        },
        pontianak: {
          name: "Pontianak",
          lat: -0.0263,
          lon: 109.3425,
          country: "ID",
          state: "Kalimantan Barat",
        },
        samarinda: {
          name: "Samarinda",
          lat: -0.5022,
          lon: 117.1536,
          country: "ID",
          state: "Kalimantan Timur",
        },
        banjarmasin: {
          name: "Banjarmasin",
          lat: -3.3194,
          lon: 114.5903,
          country: "ID",
          state: "Kalimantan Selatan",
        },
        pekanbaru: {
          name: "Pekanbaru",
          lat: 0.5333,
          lon: 101.45,
          country: "ID",
          state: "Riau",
        },
        jambi: {
          name: "Jambi",
          lat: -1.6101,
          lon: 103.6131,
          country: "ID",
          state: "Jambi",
        },
        padang: {
          name: "Padang",
          lat: -0.9471,
          lon: 100.4172,
          country: "ID",
          state: "Sumatra Barat",
        },
        manado: {
          name: "Manado",
          lat: 1.4748,
          lon: 124.8421,
          country: "ID",
          state: "Sulawesi Utara",
        },
        batam: {
          name: "Batam",
          lat: 1.0456,
          lon: 104.0305,
          country: "ID",
          state: "Kepulauan Riau",
        },
        malang: {
          name: "Malang",
          lat: -7.9797,
          lon: 112.6304,
          country: "ID",
          state: "Jawa Timur",
        },
        solo: {
          name: "Surakarta",
          lat: -7.5755,
          lon: 110.8243,
          country: "ID",
          state: "Jawa Tengah",
        },
        cirebon: {
          name: "Cirebon",
          lat: -6.7063,
          lon: 108.5571,
          country: "ID",
          state: "Jawa Barat",
        },
        bogor: {
          name: "Bogor",
          lat: -6.595,
          lon: 106.789,
          country: "ID",
          state: "Jawa Barat",
        },
        depok: {
          name: "Depok",
          lat: -6.4025,
          lon: 106.7942,
          country: "ID",
          state: "Jawa Barat",
        },
        tangerang: {
          name: "Tangerang",
          lat: -6.1783,
          lon: 106.6319,
          country: "ID",
          state: "Banten",
        },
        bekasi: {
          name: "Bekasi",
          lat: -6.2383,
          lon: 106.9756,
          country: "ID",
          state: "Jawa Barat",
        },
      };

      // Cache for city searches to avoid repeated API calls
      const citySearchCache = new Map();

      async function searchCityAPI(cityName) {
        const cacheKey = cityName.toLowerCase().trim();

        // Check popular cities first (instant response!)
        if (popularIndonesianCities[cacheKey]) {
          console.log("Using popular city data for:", cityName);
          const city = popularIndonesianCities[cacheKey];
          return {
            success: true,
            cities: [city],
          };
        }

        // Check cache
        if (citySearchCache.has(cacheKey)) {
          console.log("Using cached result for:", cityName);
          return citySearchCache.get(cacheKey);
        }

        try {
          const response = await fetch(
            `${API_BASE_URL}/api/weather/search?city=${encodeURIComponent(
              cityName
            )}`,
            {
              signal: AbortSignal.timeout(5000), // 5 second timeout
            }
          );

          if (!response.ok) {
            const errorData = await response.json().catch(() => ({}));
            throw new Error(errorData.error || "Gagal mencari kota");
          }

          const data = await response.json();

          // Cache successful results
          if (data.success) {
            citySearchCache.set(cacheKey, data);

            // Limit cache size to 50 entries
            if (citySearchCache.size > 50) {
              const firstKey = citySearchCache.keys().next().value;
              citySearchCache.delete(firstKey);
            }
          }

          return data;
        } catch (error) {
          if (error.name === "TimeoutError" || error.name === "AbortError") {
            throw new Error("Koneksi timeout. Coba lagi.");
          }
          console.error("City Search Error:", error);
          throw error;
        }
      }

      // ============================================
      // TRUTH TABLE GENERATION
      // ============================================

      async function generateTruthTable() {
        const tbody = document.getElementById("truth-table-body");
        tbody.innerHTML =
          '<tr><td colspan="5" class="text-center py-8"><div class="spinner mx-auto"></div></td></tr>';

        const data = await getTruthTableAPI();

        if (!data || !data.success) {
          tbody.innerHTML =
            '<tr><td colspan="5" class="text-center py-8 text-red-600">Error loading truth table</td></tr>';
          return;
        }

        tbody.innerHTML = "";

        data.table.forEach((row, index) => {
          const tr = document.createElement("tr");
          tr.id = `row-${row.p ? 1 : 0}-${row.q ? 1 : 0}-${row.r ? 1 : 0}`;
          tr.className = "hover:bg-slate-50";

          // Helper function to create cell with icon
          const createCell = (value) => {
            const cell = document.createElement("td");
            cell.className = "border-2 border-slate-300 px-6 py-4 text-center";
            cell.innerHTML = value
              ? '<i class="fas fa-check-circle text-green-600 text-2xl"></i><div class="text-sm font-bold mt-1">TRUE (1)</div>'
              : '<i class="fas fa-times-circle text-red-600 text-2xl"></i><div class="text-sm font-bold mt-1">FALSE (0)</div>';
            return cell;
          };

          tr.appendChild(createCell(row.p));
          tr.appendChild(createCell(row.q));
          tr.appendChild(createCell(row.r));
          tr.appendChild(createCell(row.q_or_r));

          // Result cell with special styling
          const resultCell = document.createElement("td");
          resultCell.className = `border-2 border-slate-300 px-6 py-4 text-center font-bold ${
            row.result ? "bg-red-100" : "bg-green-100"
          }`;
          resultCell.innerHTML = row.result
            ? '<i class="fas fa-exclamation-triangle text-red-600 text-3xl"></i><div class="text-sm font-bold mt-2 text-red-700">BANJIR</div>'
            : '<i class="fas fa-shield-alt text-green-600 text-3xl"></i><div class="text-sm font-bold mt-2 text-green-700">AMAN</div>';
          tr.appendChild(resultCell);

          tbody.appendChild(tr);
        });
      }

      // ============================================
      // UI UPDATE SYSTEM
      // ============================================

      async function updateSystem() {
        // Get current state from toggles
        const p = document.getElementById("toggle-p").checked;
        const q = document.getElementById("toggle-q").checked;
        const r = document.getElementById("toggle-r").checked;

        // Show loading state
        document.getElementById("logic-trace").innerHTML =
          '<div class="flex justify-center py-8"><div class="spinner"></div></div>';
        document.getElementById("recommendation").innerHTML =
          '<div class="flex justify-center py-4"><div class="spinner"></div></div>';

        // Call Python backend API
        const data = await calculateRiskAPI(p, q, r);

        if (!data || !data.success) {
          document.getElementById("logic-trace").innerHTML =
            '<div class="text-red-600 text-center py-4">Error: Unable to connect to Python backend</div>';
          document.getElementById("recommendation").innerHTML =
            '<div class="text-red-600 text-center py-4">Error loading recommendation</div>';
          return;
        }

        // Update UI with backend results
        const p_val = data.variables.p;
        const q_val = data.variables.q;
        const r_val = data.variables.r;
        const q_or_r = data.steps.q_or_r;
        const result = data.result;

        updateLogicTrace(p_val, q_val, r_val, q_or_r, result);
        updateStatusCard(result);
        updateRecommendation(data.recommendation);
        highlightTruthTableRow(p_val, q_val, r_val);

        // Add to history
        addToHistory(p_val, q_val, r_val, result, data.recommendation);
      }

      function updateLogicTrace(p, q, r, qOrR, result) {
        const traceDiv = document.getElementById("logic-trace");

        traceDiv.innerHTML = `
                <div class="flex items-start gap-3 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500 slide-in">
                    <i class="fas fa-arrow-right text-blue-600 mt-1"></i>
                    <div>
                        <p class="font-semibold text-slate-800">Step 1: Evaluasi (q âˆ¨ r)</p>
                        <p class="text-slate-600 text-sm mt-1">
                            Lahan Sawit (${
                              q ? "TRUE" : "FALSE"
                            }) OR Sungai Buruk (${r ? "TRUE" : "FALSE"}) = 
                            <span class="font-bold ${
                              qOrR ? "text-green-600" : "text-red-600"
                            }">${qOrR ? "TRUE" : "FALSE"}</span>
                        </p>
                    </div>
                </div>
                
                <div class="flex items-start gap-3 p-4 bg-purple-50 rounded-lg border-l-4 border-purple-500 slide-in">
                    <i class="fas fa-arrow-right text-purple-600 mt-1"></i>
                    <div>
                        <p class="font-semibold text-slate-800">Step 2: Evaluasi p âˆ§ (Step 1)</p>
                        <p class="text-slate-600 text-sm mt-1">
                            Hujan Tinggi (${
                              p ? "TRUE" : "FALSE"
                            }) AND Step 1 (${qOrR ? "TRUE" : "FALSE"}) = 
                            <span class="font-bold ${
                              result ? "text-red-600" : "text-green-600"
                            }">${result ? "TRUE" : "FALSE"}</span>
                        </p>
                    </div>
                </div>
                
                <div class="flex items-start gap-3 p-4 ${
                  result
                    ? "bg-red-50 border-red-500"
                    : "bg-green-50 border-green-500"
                } rounded-lg border-l-4 slide-in">
                    <i class="fas fa-flag-checkered ${
                      result ? "text-red-600" : "text-green-600"
                    } mt-1"></i>
                    <div>
                        <p class="font-semibold text-slate-800">Result: Risiko Banjir (S)</p>
                        <p class="text-slate-600 text-sm mt-1">
                            <span class="font-bold text-xl ${
                              result ? "text-red-600" : "text-green-600"
                            }">
                                ${result ? "BANJIR TERDETEKSI" : "KONDISI AMAN"}
                            </span>
                        </p>
                        <p class="text-xs text-slate-500 mt-2">
                            <i class="fab fa-python mr-1"></i>
                            Calculated by Python Backend
                        </p>
                    </div>
                </div>
            `;
      }

      function updateStatusCard(result) {
        const statusCard = document.getElementById("status-card");
        const statusIcon = document.getElementById("status-icon");
        const statusTitle = document.getElementById("status-title");
        const statusSubtitle = document.getElementById("status-subtitle");

        if (result) {
          // DANGER STATE
          statusCard.className =
            "rounded-2xl shadow-2xl p-8 text-center bg-gradient-to-br from-red-500 to-red-700 text-white pulse-danger";
          statusIcon.className = "fas fa-exclamation-triangle text-6xl";
          statusTitle.textContent = "PERINGATAN BANJIR!";
          statusSubtitle.textContent = "Risiko Tinggi - Segera Ambil Tindakan";
        } else {
          // SAFE STATE
          statusCard.className =
            "rounded-2xl shadow-2xl p-8 text-center bg-gradient-to-br from-green-500 to-green-700 text-white";
          statusIcon.className = "fas fa-shield-alt text-6xl";
          statusTitle.textContent = "KONDISI AMAN";
          statusSubtitle.textContent = "Tidak Ada Risiko Banjir Terdeteksi";
        }
      }

      function updateRecommendation(recommendation) {
        const recDiv = document.getElementById("recommendation");

        recDiv.innerHTML = `
                <div class="flex items-start gap-4 slide-in">
                    <i class="fas ${recommendation.icon} text-4xl ${recommendation.color}"></i>
                    <div>
                        <h4 class="text-xl font-bold text-slate-800 mb-2">${recommendation.title}</h4>
                        <p class="text-slate-700 leading-relaxed whitespace-pre-line">${recommendation.text}</p>
                    </div>
                </div>
            `;
      }

      function highlightTruthTableRow(p, q, r) {
        // Remove all highlights
        document.querySelectorAll("#truth-table-body tr").forEach((row) => {
          row.classList.remove("highlight-row");
        });

        // Add highlight to current row
        const rowId = `row-${p ? 1 : 0}-${q ? 1 : 0}-${r ? 1 : 0}`;
        const currentRow = document.getElementById(rowId);
        if (currentRow) {
          currentRow.classList.add("highlight-row");
        }
      }

      // ============================================
      // HISTORY MANAGEMENT
      // ============================================

      function loadHistoryFromStorage() {
        const stored = localStorage.getItem("analysisHistory");
        if (stored) {
          try {
            analysisHistory = JSON.parse(stored);
          } catch (e) {
            console.error("Error loading history:", e);
            analysisHistory = [];
          }
        }
      }

      function saveHistoryToStorage() {
        try {
          localStorage.setItem(
            "analysisHistory",
            JSON.stringify(analysisHistory)
          );
        } catch (e) {
          console.error("Error saving history:", e);
        }
      }

      function addToHistory(p, q, r, result, recommendation) {
        const timestamp = new Date();
        const historyItem = {
          id: Date.now(),
          timestamp: timestamp.toISOString(),
          p: p,
          q: q,
          r: r,
          result: result,
          recommendation: recommendation,
          displayTime: formatDateTime(timestamp),
        };

        // Add to beginning of array
        analysisHistory.unshift(historyItem);

        // Keep only last 100 items
        if (analysisHistory.length > 100) {
          analysisHistory = analysisHistory.slice(0, 100);
        }

        saveHistoryToStorage();
      }

      function clearHistory() {
        if (
          confirm(
            "Hapus semua riwayat analisis? Tindakan ini tidak dapat dibatalkan."
          )
        ) {
          analysisHistory = [];
          saveHistoryToStorage();
          updateStatistics();
          alert("Riwayat berhasil dihapus!");
        }
      }

      function formatDateTime(date) {
        const options = {
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        };
        return date.toLocaleDateString("id-ID", options);
      }

      // ============================================
      // STATISTICS & CHARTS
      // ============================================

      function updateStatistics() {
        const totalAnalyses = analysisHistory.length;
        const floodDetected = analysisHistory.filter(
          (item) => item.result
        ).length;
        const safeConditions = totalAnalyses - floodDetected;
        const riskRate =
          totalAnalyses > 0
            ? Math.round((floodDetected / totalAnalyses) * 100)
            : 0;

        // Update stat cards
        document.getElementById("stat-total").textContent = totalAnalyses;
        document.getElementById("stat-flood").textContent = floodDetected;
        document.getElementById("stat-safe").textContent = safeConditions;
        document.getElementById("stat-risk-rate").textContent = riskRate + "%";

        // Update charts
        updateRiskTrendChart();
        updateVariableDistChart();
        updateHistoryTable();
      }

      function updateRiskTrendChart() {
        const ctx = document.getElementById("riskTrendChart");
        if (!ctx) return;

        // Prepare data - last 20 analyses
        const recentHistory = analysisHistory.slice(0, 20).reverse();
        const labels = recentHistory.map((item, index) => `#${index + 1}`);
        const data = recentHistory.map((item) => (item.result ? 1 : 0));

        if (riskTrendChart) {
          riskTrendChart.destroy();
        }

        riskTrendChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: labels,
            datasets: [
              {
                label: "Risiko Banjir",
                data: data,
                borderColor: "rgb(239, 68, 68)",
                backgroundColor: "rgba(239, 68, 68, 0.1)",
                tension: 0.4,
                fill: true,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
              legend: {
                display: true,
                position: "top",
              },
              title: {
                display: true,
                text: "20 Analisis Terakhir (1 = Banjir, 0 = Aman)",
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                max: 1,
                ticks: {
                  stepSize: 1,
                  callback: function (value) {
                    return value === 1 ? "Banjir" : "Aman";
                  },
                },
              },
            },
          },
        });
      }

      function updateVariableDistChart() {
        const ctx = document.getElementById("variableDistChart");
        if (!ctx) return;

        // Count variable occurrences
        const pTrue = analysisHistory.filter((item) => item.p).length;
        const qTrue = analysisHistory.filter((item) => item.q).length;
        const rTrue = analysisHistory.filter((item) => item.r).length;

        if (variableDistChart) {
          variableDistChart.destroy();
        }

        variableDistChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Hujan Tinggi (p)", "Lahan Rusak (q)", "Sungai Buruk (r)"],
            datasets: [
              {
                label: "Frekuensi TRUE",
                data: [pTrue, qTrue, rTrue],
                backgroundColor: [
                  "rgba(59, 130, 246, 0.8)",
                  "rgba(34, 197, 94, 0.8)",
                  "rgba(6, 182, 212, 0.8)",
                ],
                borderColor: [
                  "rgb(59, 130, 246)",
                  "rgb(34, 197, 94)",
                  "rgb(6, 182, 212)",
                ],
                borderWidth: 2,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
              legend: {
                display: false,
              },
              title: {
                display: true,
                text: "Distribusi Kondisi Variabel",
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  stepSize: 1,
                },
              },
            },
          },
        });
      }

      function updateHistoryTable() {
        const container = document.getElementById("history-table-container");
        if (!container) return;

        if (analysisHistory.length === 0) {
          container.innerHTML = `
                    <div class="text-center py-12 text-slate-400">
                        <i class="fas fa-inbox text-6xl mb-4"></i>
                        <p class="text-lg">Belum ada riwayat analisis</p>
                    </div>
                `;
          return;
        }

        const tableHTML = `
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">Waktu</th>
                                <th class="px-4 py-3 text-center text-sm font-semibold text-slate-700">Hujan (p)</th>
                                <th class="px-4 py-3 text-center text-sm font-semibold text-slate-700">Lahan (q)</th>
                                <th class="px-4 py-3 text-center text-sm font-semibold text-slate-700">Sungai (r)</th>
                                <th class="px-4 py-3 text-center text-sm font-semibold text-slate-700">Hasil</th>
                                <th class="px-4 py-3 text-left text-sm font-semibold text-slate-700">Rekomendasi</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200">
                            ${analysisHistory
                              .slice(0, 50)
                              .map(
                                (item) => `
                                <tr class="hover:bg-slate-50">
                                    <td class="px-4 py-3 text-sm text-slate-600">${
                                      item.displayTime
                                    }</td>
                                    <td class="px-4 py-3 text-center">
                                        ${
                                          item.p
                                            ? '<i class="fas fa-check-circle text-green-600"></i>'
                                            : '<i class="fas fa-times-circle text-red-600"></i>'
                                        }
                                    </td>
                                    <td class="px-4 py-3 text-center">
                                        ${
                                          item.q
                                            ? '<i class="fas fa-check-circle text-green-600"></i>'
                                            : '<i class="fas fa-times-circle text-red-600"></i>'
                                        }
                                    </td>
                                    <td class="px-4 py-3 text-center">
                                        ${
                                          item.r
                                            ? '<i class="fas fa-check-circle text-green-600"></i>'
                                            : '<i class="fas fa-times-circle text-red-600"></i>'
                                        }
                                    </td>
                                    <td class="px-4 py-3 text-center">
                                        <span class="px-3 py-1 rounded-full text-xs font-semibold ${
                                          item.result
                                            ? "bg-red-100 text-red-700"
                                            : "bg-green-100 text-green-700"
                                        }">
                                            ${item.result ? "BANJIR" : "AMAN"}
                                        </span>
                                    </td>
                                    <td class="px-4 py-3 text-sm text-slate-600">${
                                      item.recommendation.title
                                    }</td>
                                </tr>
                            `
                              )
                              .join("")}
                        </tbody>
                    </table>
                </div>
            `;

        container.innerHTML = tableHTML;
      }

      // ============================================
      // SIMULATION
      // ============================================

      async function runSimulation(p, q, r) {
        // Update toggles
        document.getElementById("toggle-p").checked = p;
        document.getElementById("toggle-q").checked = q;
        document.getElementById("toggle-r").checked = r;

        // Call API
        const data = await calculateRiskAPI(p, q, r);

        if (!data || !data.success) {
          return;
        }

        // Show result in simulation panel
        const resultDiv = document.getElementById("simulation-result");
        const result = data.result;
        const q_or_r = data.steps.q_or_r;
        const resultClass = result
          ? "bg-red-50 border-red-500"
          : "bg-green-50 border-green-500";
        const iconClass = result
          ? "fa-exclamation-triangle text-red-600"
          : "fa-shield-alt text-green-600";

        resultDiv.innerHTML = `
                <div class="text-center slide-in">
                    <i class="fas ${iconClass} text-6xl mb-4"></i>
                    <h3 class="text-2xl font-bold text-slate-800 mb-3">${
                      data.recommendation.title
                    }</h3>
                    <div class="bg-white p-6 rounded-lg border-2 ${
                      result ? "border-red-200" : "border-green-200"
                    } mb-4">
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div>
                                <p class="text-sm text-slate-600">Hujan (p)</p>
                                <p class="font-bold ${
                                  p ? "text-blue-600" : "text-slate-400"
                                }">${p ? "TRUE" : "FALSE"}</p>
                            </div>
                            <div>
                                <p class="text-sm text-slate-600">Lahan (q)</p>
                                <p class="font-bold ${
                                  q ? "text-green-600" : "text-slate-400"
                                }">${q ? "TRUE" : "FALSE"}</p>
                            </div>
                            <div>
                                <p class="text-sm text-slate-600">Sungai (r)</p>
                                <p class="font-bold ${
                                  r ? "text-cyan-600" : "text-slate-400"
                                }">${r ? "TRUE" : "FALSE"}</p>
                            </div>
                        </div>
                        <div class="text-left">
                            <p class="text-sm font-semibold text-slate-800 mb-2">Trace Logika:</p>
                            <p class="text-sm text-slate-600">q âˆ¨ r = ${
                              q_or_r ? "TRUE" : "FALSE"
                            }</p>
                            <p class="text-sm text-slate-600">p âˆ§ (q âˆ¨ r) = ${
                              result ? "TRUE" : "FALSE"
                            }</p>
                        </div>
                    </div>
                    <p class="text-slate-700 text-left whitespace-pre-line">${
                      data.recommendation.text
                    }</p>
                </div>
            `;

        resultDiv.className = `${resultClass} rounded-xl p-8 border-2`;
      }

      async function loadAllScenarios() {
        const container = document.getElementById("all-scenarios");
        if (!container) return;

        container.innerHTML =
          '<div class="col-span-full flex justify-center py-8"><div class="spinner"></div></div>';

        const scenarios = [
          [false, false, false],
          [false, false, true],
          [false, true, false],
          [false, true, true],
          [true, false, false],
          [true, false, true],
          [true, true, false],
          [true, true, true],
        ];

        const scenarioCards = [];

        for (const [p, q, r] of scenarios) {
          const data = await calculateRiskAPI(p, q, r);
          if (!data || !data.success) continue;

          const cardClass = data.result
            ? "bg-red-50 border-red-200"
            : "bg-green-50 border-green-200";
          const iconClass = data.result
            ? "fa-exclamation-triangle text-red-600"
            : "fa-shield-alt text-green-600";

          scenarioCards.push(`
                    <div class="p-4 ${cardClass} border-2 rounded-xl">
                        <i class="fas ${iconClass} text-3xl mb-3"></i>
                        <div class="grid grid-cols-3 gap-2 mb-3">
                            <div class="text-center">
                                <p class="text-xs text-slate-600">p</p>
                                <p class="font-bold ${
                                  p ? "text-blue-600" : "text-slate-400"
                                }">${p ? "1" : "0"}</p>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-slate-600">q</p>
                                <p class="font-bold ${
                                  q ? "text-green-600" : "text-slate-400"
                                }">${q ? "1" : "0"}</p>
                            </div>
                            <div class="text-center">
                                <p class="text-xs text-slate-600">r</p>
                                <p class="font-bold ${
                                  r ? "text-cyan-600" : "text-slate-400"
                                }">${r ? "1" : "0"}</p>
                            </div>
                        </div>
                        <p class="text-sm font-bold text-slate-800 mb-2">${
                          data.result ? "BANJIR" : "AMAN"
                        }</p>
                        <p class="text-xs text-slate-600 line-clamp-2">${
                          data.recommendation.title
                        }</p>
                    </div>
                `);
        }

        container.innerHTML = scenarioCards.join("");
      }

      // ============================================
      // WEATHER
      // ============================================

      let currentWeatherData = null;

      async function loadWeather(city = null, lat = null, lon = null) {
        const loadingEl = document.getElementById("weather-loading");
        const errorEl = document.getElementById("weather-error");
        const contentEl = document.getElementById("weather-content");

        // Show loading
        loadingEl.classList.remove("hidden");
        errorEl.classList.add("hidden");
        contentEl.classList.add("hidden");

        try {
          const data = await getWeatherAPI(city, lat, lon);

          if (!data || !data.success) {
            throw new Error(data.error || "Failed to load weather data");
          }

          currentWeatherData = data;
          displayWeather(data);

          // Hide loading, show content
          loadingEl.classList.add("hidden");
          contentEl.classList.remove("hidden");

          showToast("Data cuaca berhasil dimuat", "success");
        } catch (error) {
          console.error("Error loading weather:", error);

          // Show error
          loadingEl.classList.add("hidden");
          errorEl.classList.remove("hidden");
          document.getElementById("weather-error-message").textContent =
            error.message;

          showToast("Gagal memuat data cuaca", "error");
        }
      }

      function displayWeather(data) {
        // Location and timestamp
        document.getElementById(
          "weather-location"
        ).textContent = `${data.location.name}, ${data.location.country}`;
        document.getElementById(
          "weather-timestamp"
        ).textContent = `Diperbarui: ${data.current.timestamp}`;

        // Current weather
        document.getElementById("weather-temp").textContent = data.current.temp;
        document.getElementById("weather-feels-like").textContent =
          data.current.feels_like;
        document.getElementById("weather-temp-min").textContent =
          data.current.temp_min;
        document.getElementById("weather-temp-max").textContent =
          data.current.temp_max;
        document.getElementById("weather-description").textContent =
          data.current.description;
        document.getElementById(
          "weather-icon"
        ).src = `https://openweathermap.org/img/wn/${data.current.icon}@4x.png`;
        document.getElementById("weather-icon").alt = data.current.description;

        // Weather details
        document.getElementById("weather-humidity").textContent =
          data.current.humidity;
        document.getElementById("weather-wind").textContent =
          data.current.wind_speed;
        document.getElementById("weather-rain").textContent = (
          data.current.rain_1h ||
          data.current.rain_3h ||
          0
        ).toFixed(1);
        document.getElementById("weather-visibility").textContent =
          data.current.visibility.toFixed(1);
        document.getElementById("weather-pressure").textContent =
          data.current.pressure;
        document.getElementById("weather-sunrise").textContent =
          data.current.sunrise;
        document.getElementById("weather-sunset").textContent =
          data.current.sunset;

        // Add weather animations based on conditions
        addWeatherAnimations(data.current.icon, data.current.description);

        // Flood risk alert
        displayFloodRiskAlert(data.flood_risk);

        // Forecast
        displayForecast(data.forecast);

        // Weather tips
        displayWeatherTips(data);
      }

      // ============================================
      // WEATHER ANIMATIONS
      // ============================================

      function addWeatherAnimations(weatherIcon, description) {
        const container = document.getElementById(
          "weather-animation-container"
        );
        if (!container) return;

        // Clear previous animations
        container.innerHTML = "";

        const descLower = description.toLowerCase();
        const iconCode = weatherIcon.substring(0, 2); // Get weather code (01, 02, 03, etc.)

        // Determine animation type based on weather condition
        if (
          descLower.includes("rain") ||
          descLower.includes("hujan") ||
          iconCode === "09" ||
          iconCode === "10"
        ) {
          createRainAnimation(container);
          if (descLower.includes("thunder") || descLower.includes("petir")) {
            createLightningAnimation(container);
          }
        } else if (
          descLower.includes("snow") ||
          descLower.includes("salju") ||
          iconCode === "13"
        ) {
          createSnowAnimation(container);
        } else if (
          descLower.includes("cloud") ||
          descLower.includes("awan") ||
          iconCode === "02" ||
          iconCode === "03" ||
          iconCode === "04"
        ) {
          createCloudAnimation(container);
        } else if (
          descLower.includes("clear") ||
          descLower.includes("cerah") ||
          iconCode === "01"
        ) {
          createSunnyAnimation(container);
        } else if (
          descLower.includes("mist") ||
          descLower.includes("fog") ||
          descLower.includes("kabut") ||
          iconCode === "50"
        ) {
          createFogAnimation(container);
        } else {
          // Default: subtle clouds
          createCloudAnimation(container);
        }
      }

      function createRainAnimation(container) {
        const rainContainer = document.createElement("div");
        rainContainer.className = "rain-container";

        // Create 100 rain drops for more realistic effect
        for (let i = 0; i < 100; i++) {
          const drop = document.createElement("div");
          drop.className = "rain-drop";
          drop.style.left = Math.random() * 100 + "%";

          // Varying drop heights for depth
          const height = Math.random() * 30 + 15;
          drop.style.height = height + "px";

          // Varying speeds for more natural look
          drop.style.animationDuration = Math.random() * 0.3 + 0.4 + "s";
          drop.style.animationDelay = Math.random() * 2 + "s";

          // Varying opacity for depth perception
          drop.style.opacity = Math.random() * 0.3 + 0.5;

          rainContainer.appendChild(drop);
        }

        // Add splash effect at bottom
        const splash = document.createElement("div");
        splash.className = "rain-splash";
        rainContainer.appendChild(splash);

        container.appendChild(rainContainer);
      }

      function createSnowAnimation(container) {
        const snowContainer = document.createElement("div");
        snowContainer.className = "snow-container";

        // Create 60 snowflakes with varying sizes
        for (let i = 0; i < 60; i++) {
          const flake = document.createElement("div");
          flake.className = "snow-flake";
          flake.style.left = Math.random() * 100 + "%";

          // Varying sizes for depth
          const size = Math.random() * 4 + 2;
          flake.style.width = size + "px";
          flake.style.height = size + "px";

          // Larger flakes fall faster (closer to viewer)
          const duration = 10 - size / 2;
          flake.style.animationDuration = duration + "s";
          flake.style.animationDelay = Math.random() * 8 + "s";

          // Larger flakes are more opaque
          flake.style.opacity = size / 6 + 0.3;

          snowContainer.appendChild(flake);
        }

        container.appendChild(snowContainer);
      }

      function createCloudAnimation(container) {
        const cloudContainer = document.createElement("div");
        cloudContainer.className = "cloud-container";

        // Create 5 clouds with varying sizes and speeds
        for (let i = 0; i < 5; i++) {
          const cloud = document.createElement("div");
          cloud.className = "cloud";

          // Varying sizes for depth
          const width = Math.random() * 120 + 120;
          cloud.style.width = width + "px";
          cloud.style.height = width / 3 + "px";
          cloud.style.top = Math.random() * 40 + 10 + "%";

          // Larger clouds move slower (further away)
          const duration = width / 8 + 20;
          cloud.style.animationDuration = duration + "s";
          cloud.style.animationDelay = i * 8 + "s";

          // Opacity based on size (larger = further = more transparent)
          cloud.style.opacity = 1 - width / 600;

          cloudContainer.appendChild(cloud);
        }

        container.appendChild(cloudContainer);
      }

      function createLightningAnimation(container) {
        const lightningContainer = document.createElement("div");
        lightningContainer.className = "lightning-container";

        // Flash effect
        const flash = document.createElement("div");
        flash.className = "lightning-flash";
        lightningContainer.appendChild(flash);

        // Lightning bolt
        const bolt = document.createElement("div");
        bolt.className = "lightning-bolt";
        lightningContainer.appendChild(bolt);

        container.appendChild(lightningContainer);
      }

      function createFogAnimation(container) {
        const fogContainer = document.createElement("div");
        fogContainer.className = "fog-container";

        // Create 6 fog layers with varying depths
        for (let i = 0; i < 6; i++) {
          const fog = document.createElement("div");
          fog.className = "fog";

          // Varying sizes for depth
          const width = Math.random() * 500 + 400;
          const height = Math.random() * 200 + 150;
          fog.style.width = width + "px";
          fog.style.height = height + "px";
          fog.style.bottom = Math.random() * 40 + "%";

          // Different layers move at different speeds
          fog.style.animationDuration = Math.random() * 30 + 40 + "s";
          fog.style.animationDelay = i * 8 + "s";

          // Varying opacity for depth
          fog.style.opacity = Math.random() * 0.3 + 0.4;

          fogContainer.appendChild(fog);
        }

        container.appendChild(fogContainer);
      }

      function createSunnyAnimation(container) {
        const sunRaysContainer = document.createElement("div");
        sunRaysContainer.className = "sun-rays-container";

        // Create sun core
        const sunCore = document.createElement("div");
        sunCore.className = "sun-core";
        sunRaysContainer.appendChild(sunCore);

        // Create 12 sun rays for fuller effect
        for (let i = 0; i < 12; i++) {
          const ray = document.createElement("div");
          ray.className = "sun-ray";
          ray.style.transform = `rotate(${i * 30}deg)`;
          sunRaysContainer.appendChild(ray);
        }

        // Add sparkles
        for (let i = 0; i < 20; i++) {
          const sparkle = document.createElement("div");
          sparkle.className = "sparkle";
          sparkle.style.top = Math.random() * 100 + "%";
          sparkle.style.left = Math.random() * 100 + "%";
          sparkle.style.animationDuration = Math.random() * 2 + 2 + "s";
          sparkle.style.animationDelay = Math.random() * 5 + "s";
          container.appendChild(sparkle);
        }

        container.appendChild(sunRaysContainer);
      }

      function displayFloodRiskAlert(floodRisk) {
        const alertEl = document.getElementById("flood-risk-alert");
        const iconEl = document.getElementById("flood-risk-icon");
        const titleEl = document.getElementById("flood-risk-title");
        const messageEl = document.getElementById("flood-risk-message");

        if (floodRisk.level === "high") {
          alertEl.className =
            "bg-gradient-to-r from-red-50 to-orange-50 border-2 border-red-300 rounded-2xl shadow-xl p-6 mb-8";
          iconEl.className =
            "fas fa-exclamation-triangle text-red-600 text-4xl";
          titleEl.className = "text-xl font-bold text-red-800 mb-2";
          titleEl.textContent = "Peringatan Risiko Banjir Tinggi";
          messageEl.className = "text-sm text-red-700";
          alertEl.classList.remove("hidden");
        } else if (floodRisk.level === "medium") {
          alertEl.className =
            "bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300 rounded-2xl shadow-xl p-6 mb-8";
          iconEl.className =
            "fas fa-exclamation-circle text-yellow-600 text-4xl";
          titleEl.className = "text-xl font-bold text-yellow-800 mb-2";
          titleEl.textContent = "Perhatian: Risiko Banjir Sedang";
          messageEl.className = "text-sm text-yellow-700";
          alertEl.classList.remove("hidden");
        } else {
          alertEl.classList.add("hidden");
          return;
        }

        messageEl.textContent = floodRisk.message;
      }

      let forecastTempChart = null;

      function displayForecast(forecast) {
        const container = document.getElementById("weather-forecast");
        container.innerHTML = "";

        const days = [
          "Minggu",
          "Senin",
          "Selasa",
          "Rabu",
          "Kamis",
          "Jumat",
          "Sabtu",
        ];

        // Create temperature trend chart
        createForecastTempChart(forecast);

        forecast.forEach((day, index) => {
          const date = new Date(day.date);
          const dayName = index === 0 ? "Hari ini" : days[date.getDay()];
          const dateStr = date.getDate();

          const card = document.createElement("div");
          card.className =
            "forecast-card-enter bg-gradient-to-br from-white to-blue-50 rounded-2xl p-5 text-center hover:shadow-2xl hover:scale-105 transition-all duration-300 border-2 border-blue-100";
          card.style.animationDelay = `${index * 0.1}s`;

          card.innerHTML = `
                    <div class="mb-3">
                        <p class="font-bold text-slate-800 text-lg mb-1">${dayName}</p>
                        <p class="text-sm text-slate-500">${dateStr}</p>
                    </div>
                    <img 
                        src="https://openweathermap.org/img/wn/${
                          day.icon
                        }@4x.png" 
                        alt="${day.description}"
                        class="w-20 h-20 mx-auto mb-3 weather-icon-pulse"
                    >
                    <div class="mb-3">
                        <p class="text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">${
                          day.temp
                        }Â°</p>
                        <p class="text-sm text-slate-600 mt-1">${
                          day.temp_min
                        }Â° / ${day.temp_max}Â°</p>
                    </div>
                    <p class="text-sm text-slate-600 mb-3 capitalize font-medium">${
                      day.description
                    }</p>
                    <div class="flex items-center justify-around text-xs text-slate-600 pt-3 border-t border-blue-200">
                        <div class="text-center">
                            <i class="fas fa-tint text-blue-500 mb-1"></i>
                            <p class="font-semibold">${day.humidity}%</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-wind text-cyan-500 mb-1"></i>
                            <p class="font-semibold">${day.wind_speed} km/h</p>
                        </div>
                        ${
                          day.rain > 0
                            ? `
                        <div class="text-center">
                            <i class="fas fa-cloud-rain text-blue-600 mb-1"></i>
                            <p class="font-semibold">${day.rain.toFixed(
                              1
                            )}mm</p>
                        </div>
                        `
                            : ""
                        }
                    </div>
                `;

          container.appendChild(card);
        });

        // Create hourly forecast
        createHourlyForecast();
      }

      function createForecastTempChart(forecast) {
        const ctx = document.getElementById("forecast-temp-chart");
        if (!ctx) return;

        const days = ["Min", "Sen", "Sel", "Rab", "Kam", "Jum", "Sab"];
        const labels = forecast.map((day, index) => {
          if (index === 0) return "Hari ini";
          const date = new Date(day.date);
          return days[date.getDay()];
        });

        const temps = forecast.map((day) => day.temp);
        const tempMins = forecast.map((day) => day.temp_min);
        const tempMaxs = forecast.map((day) => day.temp_max);

        if (forecastTempChart) {
          forecastTempChart.destroy();
        }

        forecastTempChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: labels,
            datasets: [
              {
                label: "Suhu Maksimal",
                data: tempMaxs,
                borderColor: "rgba(239, 68, 68, 1)",
                backgroundColor: "rgba(239, 68, 68, 0.1)",
                fill: "+1",
                tension: 0.4,
                pointRadius: 6,
                pointHoverRadius: 8,
                pointBackgroundColor: "rgba(239, 68, 68, 1)",
                pointBorderColor: "#fff",
                pointBorderWidth: 2,
              },
              {
                label: "Suhu Rata-rata",
                data: temps,
                borderColor: "rgba(59, 130, 246, 1)",
                backgroundColor: "rgba(59, 130, 246, 0.2)",
                fill: "+1",
                tension: 0.4,
                pointRadius: 6,
                pointHoverRadius: 8,
                pointBackgroundColor: "rgba(59, 130, 246, 1)",
                pointBorderColor: "#fff",
                pointBorderWidth: 2,
              },
              {
                label: "Suhu Minimal",
                data: tempMins,
                borderColor: "rgba(34, 197, 94, 1)",
                backgroundColor: "rgba(34, 197, 94, 0.1)",
                fill: false,
                tension: 0.4,
                pointRadius: 6,
                pointHoverRadius: 8,
                pointBackgroundColor: "rgba(34, 197, 94, 1)",
                pointBorderColor: "#fff",
                pointBorderWidth: 2,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            interaction: {
              intersect: false,
              mode: "index",
            },
            plugins: {
              legend: {
                display: true,
                position: "top",
                labels: {
                  usePointStyle: true,
                  padding: 15,
                  font: {
                    size: 12,
                    weight: "bold",
                  },
                },
              },
              tooltip: {
                backgroundColor: "rgba(0, 0, 0, 0.8)",
                padding: 12,
                titleFont: {
                  size: 14,
                  weight: "bold",
                },
                bodyFont: {
                  size: 13,
                },
                callbacks: {
                  label: function (context) {
                    return (
                      context.dataset.label + ": " + context.parsed.y + "Â°C"
                    );
                  },
                },
              },
            },
            scales: {
              y: {
                beginAtZero: false,
                grid: {
                  color: "rgba(0, 0, 0, 0.05)",
                },
                ticks: {
                  callback: function (value) {
                    return value + "Â°C";
                  },
                  font: {
                    size: 11,
                    weight: "bold",
                  },
                },
              },
              x: {
                grid: {
                  display: false,
                },
                ticks: {
                  font: {
                    size: 11,
                    weight: "bold",
                  },
                },
              },
            },
            animation: {
              duration: 1500,
              easing: "easeInOutQuart",
            },
          },
        });
      }

      function createHourlyForecast() {
        const container = document.getElementById("hourly-forecast-container");
        if (!container) return;

        // Generate 24-hour forecast (simulated from current data)
        const hourlyData = generateHourlyForecast();

        let html = '<div class="hourly-scroll overflow-x-auto pb-4">';
        html += '<div class="flex gap-4 min-w-max">';

        hourlyData.forEach((hour, index) => {
          const isNow = index === 0;
          html += `
                    <div class="flex-shrink-0 w-24 text-center p-4 rounded-xl ${
                      isNow
                        ? "bg-gradient-to-br from-blue-500 to-purple-500 text-white"
                        : "bg-slate-50 hover:bg-slate-100"
                    } transition-all duration-300 hover:shadow-lg" style="animation-delay: ${
            index * 0.05
          }s;">
                        <p class="text-sm font-bold mb-2">${hour.time}</p>
                        <img 
                            src="https://openweathermap.org/img/wn/${
                              hour.icon
                            }@2x.png" 
                            alt="${hour.description}"
                            class="w-12 h-12 mx-auto mb-2"
                        >
                        <p class="text-2xl font-bold mb-1">${hour.temp}Â°</p>
                        <div class="text-xs ${
                          isNow ? "text-blue-100" : "text-slate-600"
                        } space-y-1">
                            <div class="flex items-center justify-center gap-1">
                                <i class="fas fa-tint"></i>
                                <span>${hour.humidity}%</span>
                            </div>
                            <div class="flex items-center justify-center gap-1">
                                <i class="fas fa-wind"></i>
                                <span>${hour.wind}km/h</span>
                            </div>
                        </div>
                    </div>
                `;
        });

        html += "</div></div>";
        container.innerHTML = html;
      }

      function generateHourlyForecast() {
        // This generates simulated hourly data based on current weather
        // In a real implementation, you'd get this from the API
        if (!currentWeatherData) return [];

        const hourly = [];
        const currentTemp = currentWeatherData.current.temp;
        const currentIcon = currentWeatherData.current.icon;
        const currentHumidity = currentWeatherData.current.humidity;
        const currentWind = currentWeatherData.current.wind_speed;

        for (let i = 0; i < 24; i++) {
          const hour = new Date();
          hour.setHours(hour.getHours() + i);

          // Simulate temperature variation (warmer during day, cooler at night)
          const hourOfDay = hour.getHours();
          let tempVariation = 0;
          if (hourOfDay >= 6 && hourOfDay <= 18) {
            // Daytime - warmer
            tempVariation = Math.sin(((hourOfDay - 6) * Math.PI) / 12) * 3;
          } else {
            // Nighttime - cooler
            tempVariation = -2;
          }

          hourly.push({
            time:
              i === 0
                ? "Sekarang"
                : hour.getHours().toString().padStart(2, "0") + ":00",
            temp: Math.round(
              currentTemp + tempVariation + (Math.random() - 0.5) * 2
            ),
            icon: currentIcon,
            description: currentWeatherData.current.description,
            humidity: Math.round(currentHumidity + (Math.random() - 0.5) * 10),
            wind: Math.round(currentWind + (Math.random() - 0.5) * 5),
          });
        }

        return hourly;
      }

      function displayWeatherTips(data) {
        const container = document.getElementById("weather-tips");
        const tips = generateWeatherTips(data);

        container.innerHTML = "";

        tips.forEach((tip) => {
          const tipCard = document.createElement("div");
          tipCard.className =
            "bg-white rounded-lg p-4 border-2 border-blue-200";

          tipCard.innerHTML = `
                    <div class="flex items-start gap-3">
                        <i class="${tip.icon} text-2xl ${tip.color}"></i>
                        <div>
                            <h4 class="font-bold text-slate-800 mb-1">${tip.title}</h4>
                            <p class="text-sm text-slate-600">${tip.description}</p>
                        </div>
                    </div>
                `;

          container.appendChild(tipCard);
        });
      }

      function generateWeatherTips(data) {
        const tips = [];
        const rainfall = data.current.rain_1h || data.current.rain_3h || 0;
        const humidity = data.current.humidity;

        if (rainfall > 20) {
          tips.push({
            icon: "fas fa-umbrella",
            color: "text-blue-600",
            title: "Hujan Lebat Terdeteksi",
            description:
              "Hindari perjalanan ke daerah rawan banjir. Siapkan jalur evakuasi darurat.",
          });
        }

        if (humidity > 85) {
          tips.push({
            icon: "fas fa-water",
            color: "text-cyan-600",
            title: "Kelembaban Tinggi",
            description:
              "Potensi hujan meningkat. Pantau sistem drainase di sekitar rumah.",
          });
        }

        if (data.current.wind_speed > 30) {
          tips.push({
            icon: "fas fa-wind",
            color: "text-gray-600",
            title: "Angin Kencang",
            description:
              "Amankan barang-barang di luar rumah. Waspadai pohon tumbang.",
          });
        }

        if (data.flood_risk.level === "low" && rainfall < 5) {
          tips.push({
            icon: "fas fa-check-circle",
            color: "text-green-600",
            title: "Kondisi Cuaca Baik",
            description:
              "Waktu yang tepat untuk memeriksa sistem drainase dan membersihkan selokan.",
          });
        }

        // Always add general tip
        tips.push({
          icon: "fas fa-bell",
          color: "text-purple-600",
          title: "Tetap Waspada",
          description:
            "Pantau prakiraan cuaca secara berkala dan ikuti informasi dari BMKG.",
        });

        return tips;
      }

      let searchTimeout = null;

      async function searchCity() {
        const searchInput = document.getElementById("city-search");
        const cityName = searchInput.value.trim();

        if (!cityName) {
          showToast("âš ï¸ Masukkan nama kota", "error");
          searchInput.focus();
          return;
        }

        if (cityName.length < 2) {
          showToast(
            "âš ï¸ Nama kota terlalu pendek (minimal 2 karakter)",
            "error"
          );
          return;
        }

        // Show loading state
        const searchButton = document.querySelector(
          'button[onclick="searchCity()"]'
        );
        const originalContent = searchButton.innerHTML;
        searchButton.innerHTML =
          '<i class="fas fa-spinner fa-spin mr-2"></i>Mencari...';
        searchButton.disabled = true;
        searchInput.disabled = true;

        try {
          const data = await searchCityAPI(cityName);

          if (!data.success) {
            showToast("âŒ " + (data.error || "Gagal mencari kota"), "error");
            return;
          }

          if (!data.cities || data.cities.length === 0) {
            showToast(
              `âŒ Kota "${cityName}" tidak ditemukan. Coba dengan ejaan yang berbeda.`,
              "error"
            );
            return;
          }

          const indonesianCities = data.cities.filter(
            (c) => c.country === "ID"
          );

          if (data.cities.length === 1) {
            // Direct load if only one result
            const city = data.cities[0];
            const countryName = countryNames[city.country] || city.country;
            showToast(
              `âœ… Memuat cuaca ${city.name}, ${countryName}...`,
              "success"
            );
            loadWeather(null, city.lat, city.lon);
            document.getElementById("city-suggestions").classList.add("hidden");
          } else {
            // Show suggestions
            displayCitySuggestions(data.cities);
            const msg =
              indonesianCities.length > 0
                ? `âœ… ${data.cities.length} kota ditemukan (${indonesianCities.length} di Indonesia). Pilih yang sesuai.`
                : `âœ… ${data.cities.length} kota ditemukan. Pilih yang sesuai.`;
            showToast(msg, "info");
          }
        } catch (error) {
          console.error("City search error:", error);
          if (
            error.message.includes("timeout") ||
            error.message.includes("Timeout")
          ) {
            showToast(
              "â±ï¸ Koneksi timeout. Periksa koneksi internet dan coba lagi.",
              "error"
            );
          } else {
            showToast(
              "âŒ Gagal mencari kota. Periksa koneksi internet.",
              "error"
            );
          }
        } finally {
          // Restore button state
          searchButton.innerHTML = originalContent;
          searchButton.disabled = false;
          searchInput.disabled = false;
        }
      }

      // Quick search for popular cities
      function quickSearchCity(cityName) {
        const searchInput = document.getElementById("city-search");
        searchInput.value = cityName;
        searchCity();
      }

      // Auto-search as user types (with debouncing)
      function setupAutoSearch() {
        const searchInput = document.getElementById("city-search");
        if (!searchInput) return;

        searchInput.addEventListener("input", function () {
          const cityName = this.value.trim();

          // Clear previous timeout
          if (searchTimeout) {
            clearTimeout(searchTimeout);
          }

          // Hide suggestions if input is empty
          if (!cityName) {
            document.getElementById("city-suggestions").classList.add("hidden");
            return;
          }

          // Debounce: wait 500ms after user stops typing
          if (cityName.length >= 3) {
            searchTimeout = setTimeout(() => {
              searchCityAutocomplete(cityName);
            }, 500);
          }
        });
      }

      async function searchCityAutocomplete(cityName) {
        try {
          const data = await searchCityAPI(cityName);

          if (data.success && data.cities && data.cities.length > 0) {
            displayCitySuggestions(data.cities);
          } else {
            document.getElementById("city-suggestions").classList.add("hidden");
          }
        } catch (error) {
          console.error("Autocomplete error:", error);
          // Silently fail for autocomplete
          document.getElementById("city-suggestions").classList.add("hidden");
        }
      }

      // Country names in Indonesian
      const countryNames = {
        ID: "Indonesia",
        MY: "Malaysia",
        SG: "Singapura",
        TH: "Thailand",
        PH: "Filipina",
        US: "Amerika Serikat",
        GB: "Inggris",
        AU: "Australia",
        CN: "China",
        JP: "Jepang",
        KR: "Korea Selatan",
        IN: "India",
        TR: "Turki",
        SK: "Slovakia",
        BE: "Belgia",
      };

      function displayCitySuggestions(cities) {
        const container = document.getElementById("city-suggestions");
        container.innerHTML = "";

        if (!cities || cities.length === 0) {
          container.classList.add("hidden");
          return;
        }

        cities.forEach((city, index) => {
          const item = document.createElement("div");
          const isIndonesia = city.country === "ID";
          const countryName = countryNames[city.country] || city.country;

          item.className = `px-4 py-3 hover:bg-blue-50 cursor-pointer border-b border-slate-200 last:border-b-0 text-slate-800 transition-colors ${
            isIndonesia ? "bg-green-50" : ""
          }`;
          item.innerHTML = `
                    <div class="flex items-center justify-between gap-3">
                        <div class="flex-1">
                            <p class="font-semibold flex items-center gap-2">
                                <i class="fas fa-map-marker-alt ${
                                  isIndonesia
                                    ? "text-green-600"
                                    : "text-blue-500"
                                } text-sm"></i>
                                ${city.name}
                                ${
                                  isIndonesia
                                    ? '<span class="text-xs bg-green-600 text-white px-2 py-0.5 rounded-full ml-2">Indonesia</span>'
                                    : ""
                                }
                            </p>
                            <p class="text-xs text-slate-600">${
                              city.state ? city.state + ", " : ""
                            }${countryName}</p>
                        </div>
                        <div class="text-xs text-slate-400 text-right">
                            <div>${city.lat.toFixed(2)}Â°</div>
                            <div>${city.lon.toFixed(2)}Â°</div>
                        </div>
                    </div>
                `;

          item.onclick = () => {
            loadWeather(null, city.lat, city.lon);
            container.classList.add("hidden");
            document.getElementById("city-search").value = city.name;
            showToast(`Memuat cuaca ${city.name}, ${countryName}...`, "info");
          };

          container.appendChild(item);
        });

        // Add header if we have results
        if (cities.length > 0) {
          const header = document.createElement("div");
          header.className =
            "px-4 py-2 bg-slate-100 text-slate-600 text-xs font-semibold sticky top-0";
          const indonesianCount = cities.filter(
            (c) => c.country === "ID"
          ).length;
          header.textContent =
            indonesianCount > 0
              ? `${cities.length} kota ditemukan (${indonesianCount} di Indonesia)`
              : `${cities.length} kota ditemukan`;
          container.insertBefore(header, container.firstChild);
        }

        container.classList.remove("hidden");
      }

      function useCurrentLocation() {
        if (!navigator.geolocation) {
          showToast("Geolocation tidak didukung browser Anda", "error");
          return;
        }

        showToast("Mendapatkan lokasi Anda...", "info");

        navigator.geolocation.getCurrentPosition(
          (position) => {
            loadWeather(
              null,
              position.coords.latitude,
              position.coords.longitude
            );
          },
          (error) => {
            console.error("Geolocation error:", error);
            showToast(
              "Gagal mendapatkan lokasi. Gunakan pencarian kota.",
              "error"
            );
          }
        );
      }

      function refreshWeather() {
        if (currentWeatherData && currentWeatherData.location) {
          loadWeather(
            null,
            currentWeatherData.location.lat,
            currentWeatherData.location.lon
          );
        } else {
          loadWeather();
        }
      }

      // Hide city suggestions when clicking outside
      document.addEventListener("click", function (event) {
        const searchInput = document.getElementById("city-search");
        const suggestions = document.getElementById("city-suggestions");

        if (
          searchInput &&
          suggestions &&
          !searchInput.contains(event.target) &&
          !suggestions.contains(event.target)
        ) {
          suggestions.classList.add("hidden");
        }
      });

      // ============================================
      // MODALS
      // ============================================

      function openEducationModal() {
        document.getElementById("education-modal").classList.remove("hidden");
        document.getElementById("education-modal").classList.add("flex");
      }

      function closeEducationModal() {
        document.getElementById("education-modal").classList.add("hidden");
        document.getElementById("education-modal").classList.remove("flex");
      }

      function openChecklistModal() {
        document.getElementById("checklist-modal").classList.remove("hidden");
        document.getElementById("checklist-modal").classList.add("flex");
      }

      function closeChecklistModal() {
        document.getElementById("checklist-modal").classList.add("hidden");
        document.getElementById("checklist-modal").classList.remove("flex");
      }

      // ============================================
      // UTILITY FUNCTIONS
      // ============================================

      function resetToggles() {
        document.getElementById("toggle-p").checked = false;
        document.getElementById("toggle-q").checked = false;
        document.getElementById("toggle-r").checked = false;
        updateSystem();
      }

      // ============================================
      // SCROLL ANIMATIONS
      // ============================================

      // Intersection Observer for scroll animations
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      }, observerOptions);

      // Observe all reveal-section elements
      document.querySelectorAll(".reveal-section").forEach((el) => {
        observer.observe(el);
      });

      // Add smooth scroll behavior
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
        });
      });

      // ============================================
      // LOADING SCREEN
      // ============================================

      window.addEventListener("load", function () {
        setTimeout(() => {
          document.getElementById("loading-screen").classList.add("hidden");
          showToast("Sistem berhasil dimuat!", "success");
        }, 1500);
      });

      // ============================================
      // SCROLL PROGRESS BAR
      // ============================================

      window.addEventListener("scroll", function () {
        const winScroll =
          document.body.scrollTop || document.documentElement.scrollTop;
        const height =
          document.documentElement.scrollHeight -
          document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.getElementById("scroll-progress").style.width = scrolled + "%";
      });

      // ============================================
      // TOAST NOTIFICATIONS
      // ============================================

      function showToast(message, type = "info") {
        const container = document.getElementById("toast-container");
        const toast = document.createElement("div");
        toast.className = `toast ${type}`;

        const icon =
          type === "success"
            ? "fa-check-circle"
            : type === "error"
            ? "fa-exclamation-circle"
            : "fa-info-circle";

        toast.innerHTML = `
                <i class="fas ${icon} text-2xl"></i>
                <span class="flex-1">${message}</span>
                <button onclick="this.parentElement.remove()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            `;

        container.appendChild(toast);

        setTimeout(() => {
          toast.style.animation = "slideInRight 0.3s ease-out reverse";
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      // ============================================
      // DARK MODE
      // ============================================

      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
        const isDark = document.body.classList.contains("dark-mode");
        localStorage.setItem("darkMode", isDark);
        showToast(
          isDark ? "Dark mode activated" : "Light mode activated",
          "info"
        );
      }

      // Load dark mode preference
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark-mode");
      }

      // ============================================
      // COUNTER ANIMATION
      // ============================================

      function animateCounter(element, target, duration = 2000) {
        let start = 0;
        const increment = target / (duration / 16);

        const timer = setInterval(() => {
          start += increment;
          if (start >= target) {
            element.textContent = target;
            clearInterval(timer);
          } else {
            element.textContent = Math.floor(start);
          }
        }, 16);
      }

      // Animate counters when they come into view
      const counterObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting && !entry.target.dataset.animated) {
              const target = parseInt(entry.target.dataset.target);
              animateCounter(entry.target, target);
              entry.target.dataset.animated = "true";
            }
          });
        },
        { threshold: 0.5 }
      );

      document.querySelectorAll(".counter").forEach((counter) => {
        counterObserver.observe(counter);
      });

      // ============================================
      // PARALLAX EFFECT
      // ============================================

      document.addEventListener("mousemove", function (e) {
        const parallaxElements = document.querySelectorAll(".parallax");
        const mouseX = e.clientX / window.innerWidth;
        const mouseY = e.clientY / window.innerHeight;

        parallaxElements.forEach((el) => {
          const speed = el.dataset.speed || 5;
          const x = (mouseX - 0.5) * speed;
          const y = (mouseY - 0.5) * speed;
          el.style.transform = `translate(${x}px, ${y}px)`;
        });
      });

      // ============================================
      // ENHANCED NOTIFICATIONS
      // ============================================

      // Override alert function with toast
      const originalAlert = window.alert;
      window.alert = function (message) {
        showToast(message, "info");
      };

      // ============================================
      // PROJECT QR CODE MODAL
      // ============================================

      function showProjectQR() {
        const modal = document.createElement("div");
        modal.className =
          "fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4";
        modal.onclick = function (e) {
          if (e.target === modal) modal.remove();
        };

        modal.innerHTML = `
                <div class="bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-fade-in-up">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                            <i class="fas fa-qrcode text-blue-600"></i>
                            Akses Cepat Proyek
                        </h3>
                        <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600 text-2xl">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="text-center">
                        <div class="bg-gray-100 p-6 rounded-xl mb-4">
                            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=http://localhost:5000" 
                                 alt="QR Code" 
                                 class="mx-auto w-48 h-48">
                        </div>
                        <p class="text-gray-600 text-sm mb-4">
                            Scan QR code untuk akses langsung ke sistem
                        </p>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                            <p class="text-xs text-blue-800 font-mono break-all">
                                http://localhost:5000
                            </p>
                        </div>
                    </div>
                </div>
            `;

        document.body.appendChild(modal);
      }

      // ============================================
      // INITIALIZATION
      // ============================================

      // Load history from localStorage
      loadHistoryFromStorage();

      // Generate truth table on page load
      generateTruthTable();

      // Initialize with default state (all false)
      updateSystem();

      // Setup auto-search for weather
      setupAutoSearch();

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if (e.altKey && e.key === "p") {
          e.preventDefault();
          const toggle = document.getElementById("toggle-p");
          toggle.checked = !toggle.checked;
          updateSystem();
        }
        if (e.altKey && e.key === "q") {
          e.preventDefault();
          const toggle = document.getElementById("toggle-q");
          toggle.checked = !toggle.checked;
          updateSystem();
        }
        if (e.altKey && e.key === "r") {
          e.preventDefault();
          const toggle = document.getElementById("toggle-r");
          toggle.checked = !toggle.checked;
          updateSystem();
        }
        if (e.altKey && e.key === "0") {
          e.preventDefault();
          resetToggles();
        }
      });

      // ============================================
      // REAL-TIME CLOCK
      // ============================================

      function updateClock() {
        const now = new Date();

        // Format time (HH:MM:SS)
        const hours = String(now.getHours()).padStart(2, "0");
        const minutes = String(now.getMinutes()).padStart(2, "0");
        const seconds = String(now.getSeconds()).padStart(2, "0");
        const timeString = `${hours}:${minutes}:${seconds}`;

        // Format date
        const days = [
          "Minggu",
          "Senin",
          "Selasa",
          "Rabu",
          "Kamis",
          "Jumat",
          "Sabtu",
        ];
        const months = [
          "Januari",
          "Februari",
          "Maret",
          "April",
          "Mei",
          "Juni",
          "Juli",
          "Agustus",
          "September",
          "Oktober",
          "November",
          "Desember",
        ];

        const dayName = days[now.getDay()];
        const date = now.getDate();
        const month = months[now.getMonth()];
        const year = now.getFullYear();
        const dateString = `${dayName}, ${date} ${month} ${year}`;

        // Update DOM
        const timeEl = document.getElementById("current-time");
        const dateEl = document.getElementById("current-date");

        if (timeEl) timeEl.textContent = timeString;
        if (dateEl) dateEl.textContent = dateString;
      }

      // Update clock immediately and then every second
      updateClock();
      setInterval(updateClock, 1000);

      console.log(
        "%cðŸŒŠ Sistem Pakar Mitigasi Bencana Alam - Enhanced Version",
        "color: #3b82f6; font-size: 20px; font-weight: bold;"
      );
      console.log(
        "%cFitur Baru:",
        "color: #10b981; font-size: 14px; font-weight: bold;"
      );
      console.log("âœ“ Grafik Tren Risiko");
      console.log("âœ“ Dashboard Statistik");
      console.log("âœ“ Mode Simulasi Interaktif");
      console.log("âœ“ Panel Edukasi Logika");
      console.log("âœ“ Real-time Clock â°");
      console.log("âœ“ Checklist Kesiapsiagaan");
      console.log("âœ“ Loading Screen Animation");
      console.log("âœ“ Scroll Progress Bar");
      console.log("âœ“ Toast Notifications");
      console.log("âœ“ Dark Mode Toggle");
      console.log("âœ“ Floating Action Button");
      console.log("âœ“ Ripple Effects");
      console.log("âœ“ Particle Background");
      console.log("âœ“ Counter Animations");
      console.log("âœ“ Parallax Effects");
    </script>
  </body>
</html>
